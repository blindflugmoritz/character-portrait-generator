import{s as gt,n as Ne,o as ba,e as It,r as pt,i as Ia,x as ya}from"../chunks/B0GelnsJ.js";import{S as vt,i as mt,d as v,w as i,y as lt,b as Y,c as o,e as g,f as S,h as E,j as p,l as I,z,A as We,B as Ie,x as ht,C as Z,D as Oe,g as re,k as se,s as Ze,o as xt,E as Aa,q as kt,t as ut,a as _t,n as Na,u as bt,F as xa,v as yt,r as Ct,G as Ca,m as Ma}from"../chunks/yl6jyh90.js";const Da=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Ba=[{index:0,name:"Thin"},{index:1,name:"Average"},{index:2,name:"Bulky"},{index:3,name:"Fat"}],le={Skin:[{index:0,name:"Very Light",hex:"#FFE0BD"},{index:1,name:"Light",hex:"#FFCD94"},{index:2,name:"Light Medium",hex:"#EAC086"},{index:3,name:"Medium",hex:"#C68642"},{index:4,name:"Olive",hex:"#A67C52"},{index:5,name:"Brown",hex:"#8D5524"},{index:6,name:"Dark Brown",hex:"#664229"}],Hair:[{index:0,name:"Platinum Blonde",hex:"#F5F5DC"},{index:1,name:"Blonde",hex:"#E5C18A"},{index:2,name:"Light Brown",hex:"#A67C52"},{index:3,name:"Brown",hex:"#6E4A2D"},{index:4,name:"Dark Brown",hex:"#4A2C1C"},{index:5,name:"Black",hex:"#1C1C1C"},{index:6,name:"Auburn",hex:"#8B4513"},{index:7,name:"Red",hex:"#C85A32"}],Eye:[{index:0,name:"Blue",hex:"#5A9BCF"},{index:1,name:"Green",hex:"#5FA777"},{index:2,name:"Brown",hex:"#6E4A2D"},{index:3,name:"Hazel",hex:"#8D6E49"},{index:4,name:"Gray",hex:"#8FA8B0"},{index:5,name:"Amber",hex:"#D4A650"}],Accessory:[{index:0,name:"Black",hex:"#1C1C1C"},{index:1,name:"Brown",hex:"#6E4A2D"},{index:2,name:"Gray",hex:"#808080"},{index:3,name:"Silver",hex:"#C0C0C0"},{index:4,name:"Gold",hex:"#FFD700"}]},ft={Background:{id:20,folder:"20_Background_Background",category:"Background",canBeNone:!0},ClothesBack:{id:19,folder:"19_ClothesBack_Clothes",category:"Clothes",canBeNone:!1},HairBack:{id:18,folder:"18_HairBack_Hair",category:"Hair",canBeNone:!0,useHairColor:!0},Body:{id:17,folder:"17_Body_Skin",category:"Skin",canBeNone:!1,useSkinColor:!0},Clothes:{id:16,folder:"16_Clothes_Clothes",category:"Clothes",canBeNone:!1},Ears:{id:15,folder:"15_Ears_Skin",category:"Skin",canBeNone:!1,useSkinColor:!0},AccessoryHead:{id:14,folder:"14_Accessory_Accessory",category:"Accessory",canBeNone:!0,useAccessoryColor:!0},Headshape:{id:13,folder:"13_Headshape_Skin",category:"Skin",canBeNone:!1,useSkinColor:!0},DetailUpper:{id:12,folder:"12_Detail_Skin",category:"Skin",canBeNone:!0,useSkinColor:!0},DetailLower:{id:11,folder:"11_Detail_Skin",category:"Skin",canBeNone:!0,useSkinColor:!0},Hair:{id:10,folder:"10_Hair_Hair",category:"Hair",canBeNone:!1,useHairColor:!0},Mouth:{id:9,folder:"9_Mouth_Lip",category:"Lip",canBeNone:!0},Beard:{id:8,folder:"8_Beard_Hair",category:"Hair",canBeNone:!0,useHairColor:!0},Moustache:{id:7,folder:"7_Moustache_Hair",category:"Hair",canBeNone:!0,useHairColor:!0},Eyes:{id:5,folder:"5_Eyes_Eye",category:"Eye",canBeNone:!1,useEyeColor:!0},Eyebrows:{id:4,folder:"4_Eyebrows_Hair",category:"Hair",canBeNone:!1,useHairColor:!0},AccessoryFace:{id:3,folder:"3_Accessory_Accessory",category:"Accessory",canBeNone:!0,useAccessoryColor:!0},Nose:{id:2,folder:"2_Nose_Skin",category:"Skin",canBeNone:!1,useSkinColor:!0},Blemish:{id:1,folder:"1_Blemish_Skin",category:"Skin",canBeNone:!0,useSkinColor:!0},AccessoryFront:{id:0,folder:"0_Accessory_Accessory",category:"Accessory",canBeNone:!0,useAccessoryColor:!0}},Lt={Accessory:{variants:{0:4,1:1,2:4,3:1}},Beard:{variants:{0:3,20:1}},Blemish:{variants:{0:1,1:1,2:1}},Body:{variants:{0:1,1:1}},Clothes:{variants:{0:2,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1},femaleOnlyIndices:[7,8,9,10,11,12],femaleSuffix:"_F.png"},ClothesBack:{variants:{0:1,14:1}},Detail:{variants:{0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1}},Ears:{variants:{0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1}},Eyebrows:{variants:{0:2,1:1,2:2,3:2,4:1,5:3,6:2,7:1}},Eyes:{variants:{0:2,1:1,2:1,3:6,4:2,5:1,6:1,7:2,8:4,9:2,10:1,11:1,12:2},genderSpecific:{9:!0}},Hair:{variants:{0:3,1:2,2:3,3:3,4:1,5:2,6:3,7:4,8:2,9:4,10:2,11:2,12:1,13:1},genderSpecific:{7:!0,8:!0,9:!0,10:!0},femaleOnlyVariants:{7:[2,3],9:[2,3]}},HairBack:{variants:{4:1,7:[0,1,3],8:2,9:6,10:2,11:2,12:2,13:1},femaleOnlyIndices:[7],genderSpecific:{8:!0,9:!0,10:!0},femaleOnlyVariants:{9:[4,5]}},Headshape:{variants:{0:2,1:1,2:1,3:1,4:1,5:1,6:1,7:2,8:3,9:2,10:1,11:1,12:1,13:1,14:1,15:1},genderSpecific:{8:!0,9:!0},femaleOnlyVariants:{9:[1]}},Moustache:{variants:{0:2,1:2,2:2,3:3,4:3}},Mouth:{variants:{0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1}},Nose:{variants:{0:3,1:2,2:1,3:1,4:2,5:2,6:2,7:2,8:2,9:2,10:1,11:1,12:2,20:1,21:1}},Background:{variants:{0:1,1:1,2:1,3:1}}},Ft={AccessoryFront:"Accessory",AccessoryFace:"Accessory",AccessoryHead:"Accessory",Blemish:"Blemish",Nose:"Nose",Eyebrows:"Eyebrows",Eyes:"Eyes",Moustache:"Moustache",Beard:"Beard",Mouth:"Mouth",Hair:"Hair",HairBack:"HairBack",DetailUpper:"Detail",DetailLower:"Detail",Headshape:"Headshape",Ears:"Ears",Clothes:"Clothes",ClothesBack:"ClothesBack",Body:"Body",Background:"Background"},Sa={0:0,1:14};function wa(t,e,n,a="Male"){var _,f;if(e===-1||n===-1)return null;const s=ft[t];if(!s)return null;const c=`${s.folder.split("_")[1].toLowerCase()}_${String(e).padStart(2,"0")}_${String(n).padStart(2,"0")}`,h=Ft[t],d=Lt[h];return(_=d==null?void 0:d.femaleOnlyIndices)!=null&&_.includes(e)?a==="Female"?d.femaleSuffix?`${c}${d.femaleSuffix}`:`${c}_female.png`:null:a==="Female"&&((f=d==null?void 0:d.genderSpecific)!=null&&f[e])?d.femaleSuffix?`${c}${d.femaleSuffix}`:`${c}_female.png`:`${c}.png`}function Ea(t,e,n,a="Male"){const s=wa(t,e,n,a);if(!s)return null;let r=ft[t].folder;return(t==="AccessoryFront"||t==="AccessoryHead")&&(r="3_Accessory_Accessory"),(t==="DetailLower"||t==="DetailUpper")&&(e>=0&&e<=9?r="11_Detail_Skin":e>=10&&e<=20&&(r="12_Detail_Skin")),`/static/PortraitSprites/${r}/${s}`}function Et(t,e=null){const n=Ft[t],a=Lt[n];if(!a||!a.variants)return[];let s=Object.keys(a.variants).map(Number).sort((l,r)=>l-r);return e==="Male"&&a.femaleOnlyIndices&&(s=s.filter(l=>!a.femaleOnlyIndices.includes(l))),s}function Bt(t,e,n=null){var c;const a=Ft[t],s=Lt[a];if(!s||!s.variants[e])return[];const l=s.variants[e];let r;if(Array.isArray(l)?r=[...l]:r=Array.from({length:l},(h,d)=>d),n==="Male"&&((c=s.femaleOnlyVariants)!=null&&c[e])){const h=s.femaleOnlyVariants[e];r=r.filter(d=>!h.includes(d))}return r}function Ht(t,e=null){return Et("HairBack",e).filter(a=>a===t)}function Pt(t="Male",e={}){var _,f,k;const{skinColorRange:n=[0,le.Skin.length-1]}=e,a=Math.max(0,n[0]),s=Math.min(le.Skin.length-1,n[1]),l=a+Math.floor(Math.random()*(s-a+1)),r={gender:t,bodyShapeIndex:Math.floor(Math.random()*Ba.length),colorIndices:{Skin:l,Hair:Math.floor(Math.random()*le.Hair.length),Eye:Math.floor(Math.random()*le.Eye.length),Accessory:Math.floor(Math.random()*le.Accessory.length)},parts:{}};for(const[u,m]of Object.entries(ft))if(!(u==="Mouth"||u==="ClothesBack"||u==="HairBack")){if(t==="Female"&&(u==="Beard"||u==="Moustache")){r.parts[u]={index:-1,variant:-1};continue}if(!m.canBeNone||Math.random()>.3){const B=Et(u,t);if(B.length>0){const C=B[Math.floor(Math.random()*B.length)],x=Bt(u,C,t);if(x.length>0){const U=x[Math.floor(Math.random()*x.length)];r.parts[u]={index:C,variant:U}}}}else r.parts[u]={index:-1,variant:-1}}const c=(_=r.parts.Clothes)==null?void 0:_.index;if(c!==void 0&&c!==-1){const u=Sa[c];if(u!==void 0)r.parts.ClothesBack={index:u,variant:0};else{const m=Et("ClothesBack",t);if(m.length>0){const B=m[Math.floor(Math.random()*m.length)];r.parts.ClothesBack={index:B,variant:0}}}}else r.parts.ClothesBack={index:-1,variant:-1};if(((f=r.parts.Moustache)==null?void 0:f.index)!==-1)r.parts.Mouth={index:-1,variant:-1};else if(Math.random()>.3){const u=Et("Mouth",t);if(u.length>0){const m=u[Math.floor(Math.random()*u.length)],B=Bt("Mouth",m,t);if(B.length>0){const C=B[Math.floor(Math.random()*B.length)];r.parts.Mouth={index:m,variant:C}}}}else r.parts.Mouth={index:-1,variant:-1};const d=(k=r.parts.Hair)==null?void 0:k.index;if(d!==void 0&&d!==-1){const u=Ht(d,t);if(u.length>0&&Math.random()>.3){const m=u[Math.floor(Math.random()*u.length)],B=Bt("HairBack",m,t);if(B.length>0){const C=B[Math.floor(Math.random()*B.length)];r.parts.HairBack={index:m,variant:C}}else r.parts.HairBack={index:-1,variant:-1}}else r.parts.HairBack={index:-1,variant:-1}}else r.parts.HairBack={index:-1,variant:-1};return r}function Dt(t="Male"){return{gender:t,bodyShapeIndex:1,colorIndices:{Skin:2,Hair:3,Eye:2,Accessory:1},parts:{Body:{index:0,variant:0},Headshape:{index:0,variant:0},Ears:{index:0,variant:0},Eyes:{index:0,variant:0},Nose:{index:0,variant:0},Mouth:{index:0,variant:0},Eyebrows:{index:0,variant:0},Hair:{index:0,variant:0},HairBack:{index:4,variant:0},Clothes:{index:0,variant:0},ClothesBack:{index:0,variant:0}}}}function Rt(t){let e,n='<div class="spinner svelte-108xfe6"></div>';return{c(){e=p("div"),e.innerHTML=n,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-9wtu98"&&(e.innerHTML=n),this.h()},h(){i(e,"class","loading-overlay svelte-108xfe6")},m(a,s){Y(a,e,s)},d(a){a&&v(e)}}}function La(t){let e,n,a,s=t[2]&&Rt();return{c(){e=p("div"),n=p("canvas"),a=I(),s&&s.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var r=S(e);n=g(r,"CANVAS",{width:!0,height:!0,class:!0}),S(n).forEach(v),a=E(r),s&&s.l(r),r.forEach(v),this.h()},h(){i(n,"width",t[0]),i(n,"height",t[0]),i(n,"class","portrait-canvas svelte-108xfe6"),lt(n,"loading",t[2]),i(e,"class","portrait-container svelte-108xfe6")},m(l,r){Y(l,e,r),o(e,n),t[6](n),o(e,a),s&&s.m(e,null)},p(l,[r]){r&1&&i(n,"width",l[0]),r&1&&i(n,"height",l[0]),r&4&&lt(n,"loading",l[2]),l[2]?s||(s=Rt(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Ne,o:Ne,d(l){l&&v(e),t[6](null),s&&s.d()}}}function At(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const a=n.getContext("2d");return a.drawImage(t,0,0),a.globalCompositeOperation="multiply",a.fillStyle=e,a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="destination-in",a.drawImage(t,0,0),n}function Fa(t,e,n){let{character:a={}}=e,{canvasSize:s=512}=e,l,r,c=new Map,h=!1;ba(()=>{n(5,r=l.getContext("2d")),_()});async function d(u){return c.has(u)?c.get(u):new Promise((m,B)=>{const C=new Image;C.onload=()=>{c.set(u,C),m(C)},C.onerror=()=>{console.warn(`Failed to load image: ${u}`),m(null)},C.src=u})}async function _(){var U,A,P,j,y,F,b,H;if(!r||!a.parts)return;n(2,h=!0),r.clearRect(0,0,s,s);const u=((U=a.colorIndices)==null?void 0:U.Skin)!==void 0?(A=le.Skin[a.colorIndices.Skin])==null?void 0:A.hex:le.Skin[2].hex,m=((P=a.colorIndices)==null?void 0:P.Hair)!==void 0?(j=le.Hair[a.colorIndices.Hair])==null?void 0:j.hex:le.Hair[3].hex,B=((y=a.colorIndices)==null?void 0:y.Eye)!==void 0?(F=le.Eye[a.colorIndices.Eye])==null?void 0:F.hex:le.Eye[2].hex,C=((b=a.colorIndices)==null?void 0:b.Accessory)!==void 0?(H=le.Accessory[a.colorIndices.Accessory])==null?void 0:H.hex:le.Accessory[1].hex,x=Object.entries(ft).sort((w,L)=>L[1].id-w[1].id);for(const[w,L]of x){const T=a.parts[w];if(!T||T.index===-1||T.variant===-1)continue;if(w==="Mouth"){const M=a.parts.Moustache;if(M&&M.index!==-1)continue}const q=Ea(w,T.index,T.variant,a.gender||"Male");if(!q){console.warn(`Invalid asset for ${w}: index ${T.index}, variant ${T.variant}, gender ${a.gender}`);continue}const O=await d(q);if(O){let M=O;L.useSkinColor?M=At(O,u):L.useHairColor?M=At(O,m):L.useEyeColor?M=At(O,B):L.useAccessoryColor&&(M=At(O,C));const W=Math.min(s/M.width,s/M.height),K=M.width*W,J=M.height*W,D=(s-K)/2,V=(s-J)/2;r.drawImage(M,D,V,K,J)}}n(2,h=!1)}function f(){return l.toDataURL("image/png")}function k(u){It[u?"unshift":"push"](()=>{l=u,n(1,l)})}return t.$$set=u=>{"character"in u&&n(3,a=u.character),"canvasSize"in u&&n(0,s=u.canvasSize)},t.$$.update=()=>{t.$$.dirty&40&&a&&r&&_()},[s,l,h,a,f,r,k]}class Ha extends vt{constructor(e){super(),mt(this,e,Fa,La,gt,{character:3,canvasSize:0,exportPortrait:4})}get exportPortrait(){return this.$$.ctx[4]}}const Ta={"1_Blemish_Skin":{"blemish_00_00.png":"Single Scar Black","blemish_01_00.png":"Double Scars Black","blemish_02_00.png":"Vertical Scar Black"},"2_Nose_Skin":{"nose_00_00.png":"Rounded Curved Feminine","nose_00_01.png":"Rounded Curved Feminine","nose_00_02.png":"Rounded Curved Feminine","nose_01_00.png":"Broad Curved Neutral","nose_01_01.png":"Broad Curved Neutral","nose_02_00.png":"Angular Masculine","nose_03_00.png":"Button Nose Cute","nose_04_00.png":"Hook Nose Prominent","nose_04_01.png":"Hook Nose Prominent","nose_05_00.png":"Straight Narrow Refined","nose_05_01.png":"Straight Narrow Refined","nose_06_00.png":"Short Rounded Compact","nose_06_01.png":"Short Rounded Compact","nose_07_00.png":"Upturned Perky","nose_07_01.png":"Upturned Perky","nose_08_00.png":"Curved Compact Subtle","nose_08_01.png":"Curved Compact Neat","nose_09_00.png":"Curved Delicate Delicate","nose_09_01.png":"Curved Delicate Delicate","nose_10_00.png":"Curved Medium Balanced","nose_11_00.png":"Curved Wide Substantial","nose_12_00.png":"Curved Strong Prominent","nose_12_01.png":"Curved Strong Distinctive","nose_20_00.png":"Straight Bridge Defined","nose_21_00.png":"Strong Bridge Masculine"},"3_Accessory_Accessory":{"accessory_00_00.png":"Beauty Mark Black","accessory_00_01.png":"Beauty Mark Black","accessory_00_02.png":"Beauty Mark Black","accessory_00_03.png":"Beauty Mark Black","accessory_01_00.png":"Monocle Black","accessory_02_00.png":"Round Glasses Black","accessory_02_01.png":"Round Glasses Black","accessory_02_02.png":"Round Glasses Black","accessory_02_03.png":"Rectangular Glasses Black","accessory_03_00.png":"Smoking Pipe Black"},"4_Eyebrows_Hair":{"eyebrows_00_00.png":"Curved Natural Black","eyebrows_00_01.png":"Curved Natural Black","eyebrows_01_00.png":"Straight Thin Black","eyebrows_02_00.png":"Straight Medium Black","eyebrows_02_01.png":"Straight Medium Black","eyebrows_03_00.png":"Curved Thick Black","eyebrows_03_01.png":"Curved Thick Black","eyebrows_04_00.png":"Angled Thick Black","eyebrows_05_00.png":"Straight Flat Black","eyebrows_05_01.png":"Straight Flat Thick Black","eyebrows_05_02.png":"Straight Flat Black","eyebrows_06_00.png":"Curved Angular Black","eyebrows_06_01.png":"Curved Angular Black","eyebrows_07_00.png":"Unibrow Black"},"5_Eyes_Eye":{"eyes_00_00.png":"Closed Neutral Black","eyes_00_01.png":"Squinting Happy Black","eyes_01_00.png":"Closed Neutral Black","eyes_02_00.png":"Closed Neutral Black","eyes_03_00.png":"Narrow Squint Black","eyes_03_01.png":"Alert Narrow Black","eyes_03_02.png":"Squinting Closed Black","eyes_03_03.png":"Arched Squint Black","eyes_03_04.png":"Determined Squint Black","eyes_03_05.png":"Angry Squint Black","eyes_04_00.png":"Closed Blank Transparent","eyes_04_01.png":"Sleepy Half-Closed Black","eyes_05_00.png":"Narrow Slits Black","eyes_06_00.png":"Narrow Slits Black","eyes_07_00.png":"Narrow Slits Black","eyes_07_01.png":"Alert Narrow Black","eyes_08_00.png":"Solid Dots Black","eyes_08_01.png":"Angry Narrow Black","eyes_08_02.png":"Closed Blank Blank","eyes_08_03.png":"Downcast Narrow Black","eyes_09_00.png":"Small Dots Black","eyes_09_00_female.png":"Feminine Almond Black","eyes_09_01.png":"Small Dots Black","eyes_09_01_female.png":"Feminine Almond Black","eyes_10_00.png":"Winking Asymmetric Black","eyes_11_00.png":"Wide Open Solid Black","eyes_12_00.png":"Curved Relaxed Black","eyes_12_01.png":"Curved Relaxed Black"},"6_HeadshapeAuxiliary_Skin":{"headshape_00_00.png":"Chin Shadow Skin Tone","headshape_01_00.png":"Jaw Definition Skin Tone"},"7_Moustache_Hair":{"moustache_00_00.png":"Toothbrush Style Black","moustache_00_01.png":"Pencil Thin Black","moustache_01_00.png":"Handlebar Wide Black","moustache_01_01.png":"Handlebar Black","moustache_02_00.png":"Chevron Thick Black","moustache_02_01.png":"Chevron Black","moustache_03_00.png":"Walrus Layered Black","moustache_03_01.png":"Walrus Black","moustache_03_02.png":"Walrus Full Black","moustache_04_00.png":"Pyramidal Black","moustache_04_01.png":"Pyramidal Black","moustache_04_02.png":"Pyramidal Full Black"},"8_Beard_Hair":{"beard_00_00.png":"Full Round Beard Black","beard_00_01.png":"Full Beard Black","beard_00_02.png":"Full Dense Beard Black","beard_20_00.png":"Goatee Pointed Black"},"9_Mouth_Lip":{"mouth_00_00.png":"Neutral Closed Black","mouth_01_00.png":"Slightly Parted Black","mouth_02_00.png":"Pursed Black","mouth_03_00.png":"Slight Curve Black","mouth_04_00.png":"Flat Line Black","mouth_05_00.png":"Downturned Black","mouth_06_00.png":"Wide Smile Black","mouth_07_00.png":"Open Smile Black","mouth_08_00.png":"Smirk Black","mouth_09_00.png":"Gentle Smile Black","mouth_10_00.png":"Compressed Black","mouth_11_00.png":"Open Round Black","mouth_12_00.png":"Wide Open Black","mouth_13_00.png":"Small Open Black","mouth_14_00.png":"Slight Frown Black","mouth_15_00.png":"Wavy Smile Black"},"10_Hair_Hair":{"hair_00_00.png":"Spiky Short Black","hair_00_01.png":"Spiky Short Lighter Tone","hair_00_02.png":"Spiky Short Medium Tone","hair_01_00.png":"Swept Side Black","hair_01_01.png":"Swept Side Lighter Tone","hair_02_00.png":"Buzzcut Short Black","hair_02_01.png":"Buzzcut Short Medium Tone","hair_02_02.png":"Buzzcut Short Lighter Tone","hair_03_00.png":"Side Part Slicked Black","hair_03_01.png":"Side Part Slicked Medium","hair_03_02.png":"Side Part Slicked Light","hair_04_00.png":"Bald Bald","hair_05_00.png":"Receding Short Black","hair_05_01.png":"Receding Short Medium Tone","hair_06_00.png":"Wavy Medium Black","hair_06_01.png":"Wavy Medium Medium Tone","hair_06_02.png":"Wavy Medium Light Tone","hair_07_00.png":"Long Flowing Black","hair_07_00_female.png":"Long Wavy Feminine Black","hair_07_01.png":"Long Flowing Medium Tone","hair_07_01_female.png":"Long Wavy Feminine Brown","hair_07_02_female.png":"Long Wavy Updo Medium","hair_07_03_female.png":"Long Wavy Flowing Medium","hair_08_00.png":"Bob Short Black","hair_08_00_female.png":"Curly Bob Black","hair_08_01.png":"Bob Short Medium Tone","hair_08_01_female.png":"Curly Bob Brown","hair_09_00.png":"Ponytail Side Black","hair_09_00_female.png":"Twin Tails Curly Black","hair_09_01.png":"Ponytail Side Medium Tone","hair_09_01_female.png":"Swept Wavy Side Brown","hair_09_02_female.png":"Curly Updo Medium Tone","hair_09_03_female.png":"Side Bun Medium Tone","hair_10_00.png":"Wavy Long Black","hair_10_00_female.png":"Wavy Shoulder-Length Black","hair_10_01.png":"Wavy Long Medium Tone","hair_10_01_female.png":"Wavy Shoulder-Length Brown","hair_11_00.png":"Wavy Bob Black","hair_11_01.png":"Wavy Bob Medium Tone","hair_12_00.png":"Curly Bob Black","hair_13_00.png":"Curly Afro Black"},"11_Detail_Skin":{"detail_00_00.png":"Forehead Wrinkle Skin Shadow","detail_01_00.png":"Worry Lines Skin Shadow","detail_02_00.png":"Frown Line Skin Shadow","detail_03_00.png":"Frown Lines Skin Shadow","detail_04_00.png":"Combination Lines Skin Shadow","detail_05_00.png":"Crow'S Feet Skin Shadow","detail_06_00.png":"Under Eye Shadow Skin","detail_07_00.png":"Cheek Line Skin Shadow","detail_08_00.png":"Deep Smile Lines Skin","detail_09_00.png":"Jaw Shadow Skin Shadow"},"12_Detail_Skin":{"detail_10_00.png":"Cheek Blush Skin Tone","detail_11_00.png":"Temple Shadow Skin Shadow","detail_12_00.png":"Forehead Shadow Skin Shadow","detail_13_00.png":"Bridge Shadow Skin Shadow","detail_14_00.png":"Mouth Shadow Skin Shadow","detail_15_00.png":"Neck Shadow Skin Shadow","detail_16_00.png":"Chin Shadow Skin Shadow","detail_17_00.png":"Overall Shading Skin Shadow","detail_18_00.png":"Side Shadow Skin Shadow","detail_19_00.png":"Eye Socket Shadow Skin","detail_20_00.png":"Brow Shadow Skin Shadow"},"13_Headshape_Skin":{"headshape_00_00.png":"Oval Standard Neutral","headshape_00_01.png":"Oval Standard Balanced","headshape_01_00.png":"Round Soft Youthful","headshape_02_00.png":"Angular Square Masculine","headshape_03_00.png":"Heart Shaped Feminine","headshape_04_00.png":"Diamond Angular Distinctive","headshape_05_00.png":"Rectangular Long Elongated","headshape_06_00.png":"Triangular Strong Strong Jaw","headshape_07_00.png":"Narrow Oval Delicate","headshape_07_01.png":"Narrow Oval Refined","headshape_08_00.png":"Broad Square Very Masculine","headshape_08_00_female.png":"Soft Oval Feminine Feminine","headshape_08_01.png":"Broad Square Very Masculine","headshape_08_01_female.png":"Soft Oval Feminine Feminine","headshape_08_02.png":"Broad Square Masculine","headshape_09_00.png":"Round Full Youthful","headshape_09_00_female.png":"Round Soft Feminine Feminine","headshape_09_01.png":"Round Full Very Youthful","headshape_09_01_female.png":"Round Soft Feminine Feminine","headshape_10_00.png":"Soft Standard Neutral","headshape_11_00.png":"Soft Oval Gentle","headshape_12_00.png":"Standard Balanced Neutral","headshape_13_00.png":"Rounded Standard Neutral","headshape_14_00.png":"Oval Mature Mature","headshape_15_00.png":"Standard Neutral Neutral"},"15_Ears_Skin":{"ears_00_00.png":"Standard Rounded Normal","ears_01_00.png":"Small Compact Small","ears_02_00.png":"Large Prominent Large","ears_03_00.png":"Angular Pointed Angular","ears_04_00.png":"Round Full Rounded","ears_05_00.png":"Narrow Elongated Long","ears_06_00.png":"Flat Close Flat","ears_07_00.png":"Detached Lobes Distinctive Lobes"},"16_Clothes_Clothes":{"clothes_00_00.png":"Formal Suit Dark Blue","clothes_00_01.png":"Formal Suit Dark With","clothes_01_00.png":"Aircrew Outfit","clothes_02_00.png":"Cook Outfit","clothes_03_00.png":"Field Mechanic Outfit","clothes_04_00.png":"Field Engineer Outfit","clothes_05_00.png":"RAF Medic Outfit","clothes_06_00.png":"AAF Labour Outfit","clothes_07_00_F.png":"AAF Cook Outfit (Female)","clothes_08_00_F.png":"Field Engineer Outfit (Female)","clothes_09_00_F.png":"AAF Labour Outfit (Female)","clothes_10_00_F.png":"Field Mechanic Outfit (Female)","clothes_11_00_F.png":"RAF Medic Outfit (Female)","clothes_12_00_F.png":"Formal Suit (Female)"},"17_Body_Skin":{"body_00_00.png":"Neck And Shoulders Skin","body_01_00.png":"Broad Shoulders Skin Tone"},"18_HairBack_Hair":{"hairback_04_00.png":"Bald Back Bald","hairback_07_00_female.png":"Long Back Female Black","hairback_07_01_female.png":"Long Back Female Brown","hairback_07_03_female.png":"Long Back Female Light","hairback_08_00.png":"Bob Back Black","hairback_08_00_female.png":"Bob Back Female Black","hairback_08_01.png":"Bob Back Medium Tone","hairback_08_01_female.png":"Bob Back Female Brown","hairback_09_00.png":"Ponytail Back Black","hairback_09_00_female.png":"Ponytail Back Female Black","hairback_09_01.png":"Ponytail Back Medium Tone","hairback_09_01_female.png":"Ponytail Back Female Brown","hairback_09_02.png":"Ponytail Back Light Tone","hairback_09_02_female.png":"Ponytail Back Female Light","hairback_09_03.png":"Side Ponytail Back Varied","hairback_09_03_female.png":"Side Ponytail Back Female","hairback_09_04_female.png":"Ponytail Back Female Varied","hairback_09_05_female.png":"Ponytail Back Female Varied","hairback_10_00.png":"Wavy Long Back Black","hairback_10_00_female.png":"Wavy Long Back Female","hairback_10_01.png":"Wavy Long Back Medium","hairback_10_01_female.png":"Wavy Long Back Female Brown","hairback_11_00.png":"Side Hair Strands Black","hairback_11_01.png":"Side Hair Strands Medium","hairback_12_00.png":"Side Curls Back Black","hairback_12_01.png":"Side Curls Back Medium","hairback_13_00.png":"Curly Sides Back Black"},"19_ClothesBack_Clothes":{"clothesback_00_00.png":"Suit Back Dark Formal","clothesback_14_00.png":"Casual Back Varied"},"20_Background_Background":{"background_00_00.png":"Military Sunset Orange","background_01_00.png":"Military Sunset Airfield Orange","background_02_00.png":"Military Airfield Cloudy Blue","background_03_00.png":"Military Hangar White"}};function Vt(t,e,n){const a=t.slice();return a[19]=e[n][0],a[20]=e[n][1],a}function Ut(t,e,n){var k,u,m,B,C;const a=t.slice();a[23]=e[n];const s=(u=(k=a[0].parts)==null?void 0:k.Hair)==null?void 0:u.index;a[24]=s;const l=Et(a[23].name,a[0].gender);a[25]=l;const r=a[23].name==="HairBack"&&a[24]!==-1?Ht(a[24],a[0].gender):a[25];a[26]=r;const c=((m=a[0].parts)==null?void 0:m[a[23].name])||{index:-1,variant:-1};a[27]=c;const h=a[27].index!==-1?Bt(a[23].name,a[27].index,a[0].gender):[];a[28]=h;const d=((C=(B=a[0].parts)==null?void 0:B.Moustache)==null?void 0:C.index)!==-1;a[29]=d;const _=a[23].name==="Mouth"&&a[29];a[30]=_;const f=a[0].gender==="Female"&&(a[23].name==="Beard"||a[23].name==="Moustache");return a[31]=f,a}function jt(t,e,n){const a=t.slice();return a[34]=e[n],a[36]=n,a}function qt(t,e,n){const a=t.slice();a[37]=e[n],a[36]=n;const s=Bt(a[23].name,a[37],a[0].gender)[0]||0;return a[38]=s,a}function Oa(t,e,n){const a=t.slice();return a[40]=e[n],a}function Pa(t,e,n){const a=t.slice();return a[40]=e[n],a}function Ra(t,e,n){const a=t.slice();return a[40]=e[n],a}function Va(t,e,n){const a=t.slice();return a[40]=e[n],a}function Ua(t,e,n){const a=t.slice();return a[49]=e[n],a}function ja(t){let e,n=t[49].name+"",a;return{c(){e=p("option"),a=se(n),this.h()},l(s){e=g(s,"OPTION",{});var l=S(e);a=re(l,n),l.forEach(v),this.h()},h(){e.__value=t[49].index,Oe(e,e.__value)},m(s,l){Y(s,e,l),o(e,a)},p:Ne,d(s){s&&v(e)}}}function qa(t){let e,n=t[40].name+"",a,s;return{c(){e=p("option"),a=se(n),s=I(),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),s=E(r),r.forEach(v),this.h()},h(){e.__value=t[40].index,Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a),o(e,s)},p:Ne,d(l){l&&v(e)}}}function Ga(t){let e,n=t[40].name+"",a,s;return{c(){e=p("option"),a=se(n),s=I(),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),s=E(r),r.forEach(v),this.h()},h(){e.__value=t[40].index,Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a),o(e,s)},p:Ne,d(l){l&&v(e)}}}function za(t){let e,n=t[40].name+"",a,s;return{c(){e=p("option"),a=se(n),s=I(),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),s=E(r),r.forEach(v),this.h()},h(){e.__value=t[40].index,Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a),o(e,s)},p:Ne,d(l){l&&v(e)}}}function Wa(t){let e,n=t[40].name+"",a,s;return{c(){e=p("option"),a=se(n),s=I(),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),s=E(r),r.forEach(v),this.h()},h(){e.__value=t[40].index,Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a),o(e,s)},p:Ne,d(l){l&&v(e)}}}function Gt(t){let e,n,a=t[23].name.replace(/([A-Z])/g," $1").trim()+"",s,l,r,c,h,d,_,f,k,u,m,B,C=t[30]&&zt(),x=t[23].canBeNone&&Wt(),U=ve(t[26]),A=[];for(let F=0;F<U.length;F+=1)A[F]=Jt(qt(t,U,F));function P(...F){return t[16](t[23],...F)}let j=t[27].index!==-1&&t[28].length>1&&Kt(t),y=t[23].canBeNone&&t[27].index!==-1&&!t[30]&&Zt(t);return{c(){e=p("div"),n=p("label"),s=se(a),l=I(),C&&C.c(),r=I(),c=p("div"),h=p("select"),x&&x.c(),d=xt();for(let F=0;F<A.length;F+=1)A[F].c();k=I(),j&&j.c(),u=I(),y&&y.c(),this.h()},l(F){e=g(F,"DIV",{class:!0});var b=S(e);n=g(b,"LABEL",{class:!0});var H=S(n);s=re(H,a),l=E(H),C&&C.l(H),H.forEach(v),r=E(b),c=g(b,"DIV",{class:!0});var w=S(c);h=g(w,"SELECT",{class:!0});var L=S(h);x&&x.l(L),d=xt();for(let T=0;T<A.length;T+=1)A[T].l(L);L.forEach(v),k=E(w),j&&j.l(w),u=E(w),y&&y.l(w),w.forEach(v),b.forEach(v),this.h()},h(){i(n,"class","svelte-1ceegqv"),i(h,"class","index-select svelte-1ceegqv"),h.disabled=f=t[30],i(c,"class","part-selectors svelte-1ceegqv"),i(e,"class","layer-control svelte-1ceegqv"),lt(e,"disabled",t[30])},m(F,b){Y(F,e,b),o(e,n),o(n,s),o(n,l),C&&C.m(n,null),o(e,r),o(e,c),o(c,h),x&&x.m(h,null),o(h,d);for(let H=0;H<A.length;H+=1)A[H]&&A[H].m(h,null);Ie(h,t[27].index),o(c,k),j&&j.m(c,null),o(c,u),y&&y.m(c,null),m||(B=Z(h,"change",P),m=!0)},p(F,b){if(t=F,b[0]&2&&a!==(a=t[23].name.replace(/([A-Z])/g," $1").trim()+"")&&Ze(s,a),t[30]?C||(C=zt(),C.c(),C.m(n,null)):C&&(C.d(1),C=null),t[23].canBeNone?x||(x=Wt(),x.c(),x.m(h,d)):x&&(x.d(1),x=null),b[0]&259){U=ve(t[26]);let H;for(H=0;H<U.length;H+=1){const w=qt(t,U,H);A[H]?A[H].p(w,b):(A[H]=Jt(w),A[H].c(),A[H].m(h,null))}for(;H<A.length;H+=1)A[H].d(1);A.length=U.length}b[0]&3&&_!==(_=t[27].index)&&Ie(h,t[27].index),b[0]&3&&f!==(f=t[30])&&(h.disabled=f),t[27].index!==-1&&t[28].length>1?j?j.p(t,b):(j=Kt(t),j.c(),j.m(c,u)):j&&(j.d(1),j=null),t[23].canBeNone&&t[27].index!==-1&&!t[30]?y?y.p(t,b):(y=Zt(t),y.c(),y.m(c,null)):y&&(y.d(1),y=null),b[0]&3&&lt(e,"disabled",t[30])},d(F){F&&v(e),C&&C.d(),x&&x.d(),We(A,F),j&&j.d(),y&&y.d(),m=!1,B()}}}function zt(t){let e,n="(disabled when moustache present)";return{c(){e=p("span"),e.textContent=n,this.h()},l(a){e=g(a,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1dxtz9u"&&(e.textContent=n),this.h()},h(){i(e,"class","disabled-hint svelte-1ceegqv")},m(a,s){Y(a,e,s)},d(a){a&&v(e)}}}function Wt(t){let e,n="None";return{c(){e=p("option"),e.textContent=n,this.h()},l(a){e=g(a,"OPTION",{"data-svelte-h":!0}),z(e)!=="svelte-msqrma"&&(e.textContent=n),this.h()},h(){e.__value="-1",Oe(e,e.__value)},m(a,s){Y(a,e,s)},d(a){a&&v(e)}}}function Jt(t){let e,n=t[8](t[23].name,t[37],t[38])+"",a,s;return{c(){e=p("option"),a=se(n),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),r.forEach(v),this.h()},h(){e.__value=s=t[37],Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a)},p(l,r){r[0]&3&&n!==(n=l[8](l[23].name,l[37],l[38])+"")&&Ze(a,n),r[0]&3&&s!==(s=l[37])&&(e.__value=s,Oe(e,e.__value))},d(l){l&&v(e)}}}function Kt(t){let e,n,a,s,l,r=ve(t[28]),c=[];for(let d=0;d<r.length;d+=1)c[d]=Yt(jt(t,r,d));function h(...d){return t[17](t[23],t[27],...d)}return{c(){e=p("select");for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){e=g(d,"SELECT",{class:!0});var _=S(e);for(let f=0;f<c.length;f+=1)c[f].l(_);_.forEach(v),this.h()},h(){i(e,"class","variant-select svelte-1ceegqv"),e.disabled=a=t[30]},m(d,_){Y(d,e,_);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);Ie(e,t[27].variant),s||(l=Z(e,"change",h),s=!0)},p(d,_){if(t=d,_[0]&259){r=ve(t[28]);let f;for(f=0;f<r.length;f+=1){const k=jt(t,r,f);c[f]?c[f].p(k,_):(c[f]=Yt(k),c[f].c(),c[f].m(e,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}_[0]&3&&n!==(n=t[27].variant)&&Ie(e,t[27].variant),_[0]&3&&a!==(a=t[30])&&(e.disabled=a)},d(d){d&&v(e),We(c,d),s=!1,l()}}}function Yt(t){let e,n=t[8](t[23].name,t[27].index,t[34])+"",a,s;return{c(){e=p("option"),a=se(n),this.h()},l(l){e=g(l,"OPTION",{});var r=S(e);a=re(r,n),r.forEach(v),this.h()},h(){e.__value=s=t[34],Oe(e,e.__value)},m(l,r){Y(l,e,r),o(e,a)},p(l,r){r[0]&3&&n!==(n=l[8](l[23].name,l[27].index,l[34])+"")&&Ze(a,n),r[0]&3&&s!==(s=l[34])&&(e.__value=s,Oe(e,e.__value))},d(l){l&&v(e)}}}function Zt(t){let e,n="âœ•",a,s;function l(){return t[18](t[23])}return{c(){e=p("button"),e.textContent=n,this.h()},l(r){e=g(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(e)!=="svelte-1513wgu"&&(e.textContent=n),this.h()},h(){i(e,"class","clear-btn svelte-1ceegqv"),i(e,"title","Remove")},m(r,c){Y(r,e,c),a||(s=Z(e,"click",l),a=!0)},p(r,c){t=r},d(r){r&&v(e),a=!1,s()}}}function Xt(t){let e,n=t[26].length>0&&!t[31]&&Gt(t);return{c(){n&&n.c(),e=xt()},l(a){n&&n.l(a),e=xt()},m(a,s){n&&n.m(a,s),Y(a,e,s)},p(a,s){a[26].length>0&&!a[31]?n?n.p(a,s):(n=Gt(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(a){a&&v(e),n&&n.d(a)}}}function Qt(t){let e,n,a=t[19]+"",s,l,r,c=ve(t[20]),h=[];for(let d=0;d<c.length;d+=1)h[d]=Xt(Ut(t,c,d));return{c(){e=p("div"),n=p("h3"),s=se(a),l=I();for(let d=0;d<h.length;d+=1)h[d].c();r=I(),this.h()},l(d){e=g(d,"DIV",{class:!0});var _=S(e);n=g(_,"H3",{class:!0});var f=S(n);s=re(f,a),f.forEach(v),l=E(_);for(let k=0;k<h.length;k+=1)h[k].l(_);r=E(_),_.forEach(v),this.h()},h(){i(n,"class","svelte-1ceegqv"),i(e,"class","category svelte-1ceegqv")},m(d,_){Y(d,e,_),o(e,n),o(n,s),o(e,l);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(e,null);o(e,r)},p(d,_){if(_[0]&2&&a!==(a=d[19]+"")&&Ze(s,a),_[0]&307){c=ve(d[20]);let f;for(f=0;f<c.length;f+=1){const k=Ut(d,c,f);h[f]?h[f].p(k,_):(h[f]=Xt(k),h[f].c(),h[f].m(e,r))}for(;f<h.length;f+=1)h[f].d(1);h.length=c.length}},d(d){d&&v(e),We(h,d)}}}function Ja(t){let e,n,a,s="Character Customization",l,r,c="ðŸŽ² Randomize",h,d,_,f="Gender",k,u,m,B="Male",C,x="Female",U,A,P,j,y="Body Shape",F,b,H,w,L,T,q="Colors",O,M,W,K,J="Skin Color",D,V,G,_e,de,oe,ie,me,he="Hair Color",ke,ae,rt,Xe,ce,Ve,Pe,Se,we="Eye Color",Ue,Me,Qe,De,je,tt,He,be,$e="Accessory Color",st,Je,qe,Re,et,X,ge,ue,xe,fe=ve(Ba),Be=[];for(let N=0;N<fe.length;N+=1)Be[N]=ja(Ua(t,fe,N));let ye=ve(le.Skin),Le=[];for(let N=0;N<ye.length;N+=1)Le[N]=qa(Va(t,ye,N));let at=ve(le.Hair),Ce=[];for(let N=0;N<at.length;N+=1)Ce[N]=Ga(Ra(t,at,N));let Ee=ve(le.Eye),R=[];for(let N=0;N<Ee.length;N+=1)R[N]=za(Pa(t,Ee,N));let te=ve(le.Accessory),$=[];for(let N=0;N<te.length;N+=1)$[N]=Wa(Oa(t,te,N));let ee=ve(t[1]),pe=[];for(let N=0;N<ee.length;N+=1)pe[N]=Qt(Vt(t,ee,N));return{c(){e=p("div"),n=p("div"),a=p("h2"),a.textContent=s,l=I(),r=p("button"),r.textContent=c,h=I(),d=p("div"),_=p("h3"),_.textContent=f,k=I(),u=p("select"),m=p("option"),m.textContent=B,C=p("option"),C.textContent=x,A=I(),P=p("div"),j=p("h3"),j.textContent=y,F=I(),b=p("select");for(let N=0;N<Be.length;N+=1)Be[N].c();w=I(),L=p("div"),T=p("h3"),T.textContent=q,O=I(),M=p("div"),W=p("div"),K=p("label"),K.textContent=J,D=I(),V=p("select");for(let N=0;N<Le.length;N+=1)Le[N].c();_e=I(),de=p("div"),oe=I(),ie=p("div"),me=p("label"),me.textContent=he,ke=I(),ae=p("select");for(let N=0;N<Ce.length;N+=1)Ce[N].c();Xe=I(),ce=p("div"),Ve=I(),Pe=p("div"),Se=p("label"),Se.textContent=we,Ue=I(),Me=p("select");for(let N=0;N<R.length;N+=1)R[N].c();De=I(),je=p("div"),tt=I(),He=p("div"),be=p("label"),be.textContent=$e,st=I(),Je=p("select");for(let N=0;N<$.length;N+=1)$[N].c();Re=I(),et=p("div"),X=I(),ge=p("div");for(let N=0;N<pe.length;N+=1)pe[N].c();this.h()},l(N){e=g(N,"DIV",{class:!0});var ne=S(e);n=g(ne,"DIV",{class:!0});var Te=S(n);a=g(Te,"H2",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1jreay8"&&(a.textContent=s),l=E(Te),r=g(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-18udmfa"&&(r.textContent=c),Te.forEach(v),h=E(ne),d=g(ne,"DIV",{class:!0});var Ge=S(d);_=g(Ge,"H3",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-nhm0xt"&&(_.textContent=f),k=E(Ge),u=g(Ge,"SELECT",{class:!0});var ze=S(u);m=g(ze,"OPTION",{"data-svelte-h":!0}),z(m)!=="svelte-170cria"&&(m.textContent=B),C=g(ze,"OPTION",{"data-svelte-h":!0}),z(C)!=="svelte-1ledxdi"&&(C.textContent=x),ze.forEach(v),Ge.forEach(v),A=E(ne),P=g(ne,"DIV",{class:!0});var Ke=S(P);j=g(Ke,"H3",{class:!0,"data-svelte-h":!0}),z(j)!=="svelte-2t0vxh"&&(j.textContent=y),F=E(Ke),b=g(Ke,"SELECT",{class:!0});var Q=S(b);for(let Ae=0;Ae<Be.length;Ae+=1)Be[Ae].l(Q);Q.forEach(v),Ke.forEach(v),w=E(ne),L=g(ne,"DIV",{class:!0});var nt=S(L);T=g(nt,"H3",{class:!0,"data-svelte-h":!0}),z(T)!=="svelte-u61t1g"&&(T.textContent=q),O=E(nt),M=g(nt,"DIV",{class:!0});var Fe=S(M);W=g(Fe,"DIV",{class:!0});var ot=S(W);K=g(ot,"LABEL",{class:!0,"data-svelte-h":!0}),z(K)!=="svelte-rbyupq"&&(K.textContent=J),D=E(ot),V=g(ot,"SELECT",{class:!0});var St=S(V);for(let Ae=0;Ae<Le.length;Ae+=1)Le[Ae].l(St);St.forEach(v),_e=E(ot),de=g(ot,"DIV",{class:!0,style:!0}),S(de).forEach(v),ot.forEach(v),oe=E(Fe),ie=g(Fe,"DIV",{class:!0});var it=S(ie);me=g(it,"LABEL",{class:!0,"data-svelte-h":!0}),z(me)!=="svelte-pte1hx"&&(me.textContent=he),ke=E(it),ae=g(it,"SELECT",{class:!0});var wt=S(ae);for(let Ae=0;Ae<Ce.length;Ae+=1)Ce[Ae].l(wt);wt.forEach(v),Xe=E(it),ce=g(it,"DIV",{class:!0,style:!0}),S(ce).forEach(v),it.forEach(v),Ve=E(Fe),Pe=g(Fe,"DIV",{class:!0});var ct=S(Pe);Se=g(ct,"LABEL",{class:!0,"data-svelte-h":!0}),z(Se)!=="svelte-1ikvaz2"&&(Se.textContent=we),Ue=E(ct),Me=g(ct,"SELECT",{class:!0});var Ye=S(Me);for(let Ae=0;Ae<R.length;Ae+=1)R[Ae].l(Ye);Ye.forEach(v),De=E(ct),je=g(ct,"DIV",{class:!0,style:!0}),S(je).forEach(v),ct.forEach(v),tt=E(Fe),He=g(Fe,"DIV",{class:!0});var dt=S(He);be=g(dt,"LABEL",{class:!0,"data-svelte-h":!0}),z(be)!=="svelte-9yqt4p"&&(be.textContent=$e),st=E(dt),Je=g(dt,"SELECT",{class:!0});var Tt=S(Je);for(let Ae=0;Ae<$.length;Ae+=1)$[Ae].l(Tt);Tt.forEach(v),Re=E(dt),et=g(dt,"DIV",{class:!0,style:!0}),S(et).forEach(v),dt.forEach(v),Fe.forEach(v),nt.forEach(v),X=E(ne),ge=g(ne,"DIV",{class:!0});var Ot=S(ge);for(let Ae=0;Ae<pe.length;Ae+=1)pe[Ae].l(Ot);Ot.forEach(v),ne.forEach(v),this.h()},h(){var N,ne,Te,Ge;i(a,"class","svelte-1ceegqv"),i(r,"class","randomize-btn svelte-1ceegqv"),i(n,"class","controls-header svelte-1ceegqv"),i(_,"class","svelte-1ceegqv"),m.__value="Male",Oe(m,m.__value),C.__value="Female",Oe(C,C.__value),i(u,"class","svelte-1ceegqv"),i(d,"class","section svelte-1ceegqv"),i(j,"class","svelte-1ceegqv"),i(b,"class","svelte-1ceegqv"),i(P,"class","section svelte-1ceegqv"),i(T,"class","svelte-1ceegqv"),i(K,"class","svelte-1ceegqv"),i(V,"class","svelte-1ceegqv"),i(de,"class","color-swatch svelte-1ceegqv"),ht(de,"background-color",le.Skin[((N=t[0].colorIndices)==null?void 0:N.Skin)??2].hex),i(W,"class","color-control svelte-1ceegqv"),i(me,"class","svelte-1ceegqv"),i(ae,"class","svelte-1ceegqv"),i(ce,"class","color-swatch svelte-1ceegqv"),ht(ce,"background-color",le.Hair[((ne=t[0].colorIndices)==null?void 0:ne.Hair)??3].hex),i(ie,"class","color-control svelte-1ceegqv"),i(Se,"class","svelte-1ceegqv"),i(Me,"class","svelte-1ceegqv"),i(je,"class","color-swatch svelte-1ceegqv"),ht(je,"background-color",le.Eye[((Te=t[0].colorIndices)==null?void 0:Te.Eye)??2].hex),i(Pe,"class","color-control svelte-1ceegqv"),i(be,"class","svelte-1ceegqv"),i(Je,"class","svelte-1ceegqv"),i(et,"class","color-swatch svelte-1ceegqv"),ht(et,"background-color",le.Accessory[((Ge=t[0].colorIndices)==null?void 0:Ge.Accessory)??1].hex),i(He,"class","color-control svelte-1ceegqv"),i(M,"class","color-controls svelte-1ceegqv"),i(L,"class","section svelte-1ceegqv"),i(ge,"class","categories svelte-1ceegqv"),i(e,"class","controls-container svelte-1ceegqv")},m(N,ne){var Te,Ge,ze,Ke;Y(N,e,ne),o(e,n),o(n,a),o(n,l),o(n,r),o(e,h),o(e,d),o(d,_),o(d,k),o(d,u),o(u,m),o(u,C),Ie(u,t[0].gender),o(e,A),o(e,P),o(P,j),o(P,F),o(P,b);for(let Q=0;Q<Be.length;Q+=1)Be[Q]&&Be[Q].m(b,null);Ie(b,t[0].bodyShapeIndex),o(e,w),o(e,L),o(L,T),o(L,O),o(L,M),o(M,W),o(W,K),o(W,D),o(W,V);for(let Q=0;Q<Le.length;Q+=1)Le[Q]&&Le[Q].m(V,null);Ie(V,((Te=t[0].colorIndices)==null?void 0:Te.Skin)??2),o(W,_e),o(W,de),o(M,oe),o(M,ie),o(ie,me),o(ie,ke),o(ie,ae);for(let Q=0;Q<Ce.length;Q+=1)Ce[Q]&&Ce[Q].m(ae,null);Ie(ae,((Ge=t[0].colorIndices)==null?void 0:Ge.Hair)??3),o(ie,Xe),o(ie,ce),o(M,Ve),o(M,Pe),o(Pe,Se),o(Pe,Ue),o(Pe,Me);for(let Q=0;Q<R.length;Q+=1)R[Q]&&R[Q].m(Me,null);Ie(Me,((ze=t[0].colorIndices)==null?void 0:ze.Eye)??2),o(Pe,De),o(Pe,je),o(M,tt),o(M,He),o(He,be),o(He,st),o(He,Je);for(let Q=0;Q<$.length;Q+=1)$[Q]&&$[Q].m(Je,null);Ie(Je,((Ke=t[0].colorIndices)==null?void 0:Ke.Accessory)??1),o(He,Re),o(He,et),o(e,X),o(e,ge);for(let Q=0;Q<pe.length;Q+=1)pe[Q]&&pe[Q].m(ge,null);ue||(xe=[Z(r,"click",t[2]),Z(u,"change",t[10]),Z(b,"change",t[11]),Z(V,"change",t[12]),Z(ae,"change",t[13]),Z(Me,"change",t[14]),Z(Je,"change",t[15])],ue=!0)},p(N,ne){var Te,Ge,ze,Ke,Q,nt,Fe,ot,St,it,wt,ct;if(ne[0]&1&&U!==(U=N[0].gender)&&Ie(u,N[0].gender),ne[0]&1&&H!==(H=N[0].bodyShapeIndex)&&Ie(b,N[0].bodyShapeIndex),ne[0]&1&&G!==(G=((Te=N[0].colorIndices)==null?void 0:Te.Skin)??2)&&Ie(V,((Ge=N[0].colorIndices)==null?void 0:Ge.Skin)??2),ne[0]&1&&ht(de,"background-color",le.Skin[((ze=N[0].colorIndices)==null?void 0:ze.Skin)??2].hex),ne[0]&1&&rt!==(rt=((Ke=N[0].colorIndices)==null?void 0:Ke.Hair)??3)&&Ie(ae,((Q=N[0].colorIndices)==null?void 0:Q.Hair)??3),ne[0]&1&&ht(ce,"background-color",le.Hair[((nt=N[0].colorIndices)==null?void 0:nt.Hair)??3].hex),ne[0]&1&&Qe!==(Qe=((Fe=N[0].colorIndices)==null?void 0:Fe.Eye)??2)&&Ie(Me,((ot=N[0].colorIndices)==null?void 0:ot.Eye)??2),ne[0]&1&&ht(je,"background-color",le.Eye[((St=N[0].colorIndices)==null?void 0:St.Eye)??2].hex),ne[0]&1&&qe!==(qe=((it=N[0].colorIndices)==null?void 0:it.Accessory)??1)&&Ie(Je,((wt=N[0].colorIndices)==null?void 0:wt.Accessory)??1),ne[0]&1&&ht(et,"background-color",le.Accessory[((ct=N[0].colorIndices)==null?void 0:ct.Accessory)??1].hex),ne[0]&307){ee=ve(N[1]);let Ye;for(Ye=0;Ye<ee.length;Ye+=1){const dt=Vt(N,ee,Ye);pe[Ye]?pe[Ye].p(dt,ne):(pe[Ye]=Qt(dt),pe[Ye].c(),pe[Ye].m(ge,null))}for(;Ye<pe.length;Ye+=1)pe[Ye].d(1);pe.length=ee.length}},i:Ne,o:Ne,d(N){N&&v(e),We(Be,N),We(Le,N),We(Ce,N),We(R,N),We($,N),We(pe,N),ue=!1,pt(xe)}}}function Ka(t,e,n){let a,s,{character:l={}}=e;l.parts||(l=Dt()),l.gender||(l.gender="Male");function r(){n(0,l=Pt(l.gender))}function c(y){console.log("Gender changed to:",y,"- generating new random character"),n(0,l=Pt(y))}function h(y,F,b){var w;const H={...l.parts,[y]:{index:parseInt(F),variant:parseInt(b)}};if(y==="Moustache"&&parseInt(F)!==-1&&(H.Mouth={index:-1,variant:-1}),y==="Clothes"){const L=parseInt(F),T=Sa[L];T!==void 0&&(H.ClothesBack={index:T,variant:0})}if(y==="Hair"){const L=parseInt(F);if(L!==-1){const T=Ht(L,l.gender),q=(w=l.parts.HairBack)==null?void 0:w.index;T.includes(q)||(T.length>0?H.HairBack={index:T[0],variant:0}:H.HairBack={index:-1,variant:-1})}else H.HairBack={index:-1,variant:-1}}n(0,l={...l,parts:H})}function d(y){n(0,l={...l,parts:{...l.parts,[y]:{index:-1,variant:-1}}})}function _(y,F){n(0,l={...l,colorIndices:{...l.colorIndices,[y]:parseInt(F)}})}function f(y){n(0,l={...l,bodyShapeIndex:parseInt(y)})}function k(y,F,b){var T;const H=wa(y,F,b,"Male");if(!H)return"Unknown";const L=ft[y].folder;return((T=Ta[L])==null?void 0:T[H])||`${y} ${F}`}const u=y=>{console.log("Gender dropdown changed to:",y.target.value),c(y.target.value)},m=y=>f(y.target.value),B=y=>_("Skin",y.target.value),C=y=>_("Hair",y.target.value),x=y=>_("Eye",y.target.value),U=y=>_("Accessory",y.target.value),A=(y,F)=>{const b=parseInt(F.target.value);if(b===-1)d(y.name);else{const H=Bt(y.name,b,l.gender);h(y.name,b,H[0]||0)}},P=(y,F,b)=>h(y.name,F.index,b.target.value),j=y=>d(y.name);return t.$$set=y=>{"character"in y&&n(0,l=y.character)},t.$$.update=()=>{t.$$.dirty[0]&512&&n(1,s=Object.entries(a).sort(([y],[F])=>y==="Background"?1:F==="Background"?-1:0))},n(9,a=Object.entries(ft).reduce((y,[F,b])=>(y[b.category]||(y[b.category]=[]),y[b.category].push({name:F,...b}),y),{})),[l,s,r,c,h,d,_,f,k,a,u,m,B,C,x,U,A,P,j]}class Ya extends vt{constructor(e){super(),mt(this,e,Ka,Ja,gt,{character:0},null,[-1,-1])}}function $t(t,e,n){const a=t.slice();return a[21]=e[n][0],a[22]=e[n][1],a}function ea(t,e,n){const a=t.slice();return a[28]=e[n],a}function ta(t,e,n){const a=t.slice();return a[25]=e[n],a}function aa(t,e,n){const a=t.slice();return a[31]=e[n],a}function na(t,e,n){const a=t.slice();return a[34]=e[n],a}function la(t){let e,n,a="Nickname",s,l,r,c,h;return{c(){e=p("div"),n=p("label"),n.textContent=a,s=I(),l=p("input"),this.h()},l(d){e=g(d,"DIV",{class:!0});var _=S(e);n=g(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-ijzfia"&&(n.textContent=a),s=E(_),l=g(_,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),_.forEach(v),this.h()},h(){i(n,"for","nickname"),i(n,"class","svelte-o9bud"),i(l,"id","nickname"),i(l,"type","text"),l.value=r=t[0].Nickname,i(l,"placeholder","e.g., Chief, Ace, etc."),i(l,"class","svelte-o9bud"),i(e,"class","form-row svelte-o9bud")},m(d,_){Y(d,e,_),o(e,n),o(e,s),o(e,l),c||(h=Z(l,"input",t[12]),c=!0)},p(d,_){_[0]&3&&r!==(r=d[0].Nickname)&&l.value!==r&&(l.value=r)},d(d){d&&v(e),c=!1,h()}}}function ra(t){let e,n=t[34]+"",a;return{c(){e=p("option"),a=se(n),this.h()},l(s){e=g(s,"OPTION",{});var l=S(e);a=re(l,n),l.forEach(v),this.h()},h(){e.__value=t[34],Oe(e,e.__value)},m(s,l){Y(s,e,l),o(e,a)},p:Ne,d(s){s&&v(e)}}}function sa(t){let e,n=t[31]+"",a;return{c(){e=p("option"),a=se(n),this.h()},l(s){e=g(s,"OPTION",{});var l=S(e);a=re(l,n),l.forEach(v),this.h()},h(){e.__value=t[31],Oe(e,e.__value)},m(s,l){Y(s,e,l),o(e,a)},p:Ne,d(s){s&&v(e)}}}function Za(t){let e,n,a="Role",s,l,r,c,h,d=ve(t[4]),_=[];for(let f=0;f<d.length;f+=1)_[f]=oa(ea(t,d,f));return{c(){e=p("div"),n=p("label"),n.textContent=a,s=I(),l=p("select");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=g(f,"DIV",{class:!0});var k=S(e);n=g(k,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-thaj42"&&(n.textContent=a),s=E(k),l=g(k,"SELECT",{id:!0,class:!0});var u=S(l);for(let m=0;m<_.length;m+=1)_[m].l(u);u.forEach(v),k.forEach(v),this.h()},h(){i(n,"for","role"),i(n,"class","svelte-o9bud"),i(l,"id","role"),i(l,"class","svelte-o9bud"),i(e,"class","form-row svelte-o9bud")},m(f,k){Y(f,e,k),o(e,n),o(e,s),o(e,l);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m(l,null);Ie(l,t[0].Role),c||(h=Z(l,"change",t[17]),c=!0)},p(f,k){if(k[0]&16){d=ve(f[4]);let u;for(u=0;u<d.length;u+=1){const m=ea(f,d,u);_[u]?_[u].p(m,k):(_[u]=oa(m),_[u].c(),_[u].m(l,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=d.length}k[0]&3&&r!==(r=f[0].Role)&&Ie(l,f[0].Role)},d(f){f&&v(e),We(_,f),c=!1,h()}}}function Xa(t){let e,n,a="Job",s,l,r,c,h,d=ve(t[3]),_=[];for(let f=0;f<d.length;f+=1)_[f]=ia(ta(t,d,f));return{c(){e=p("div"),n=p("label"),n.textContent=a,s=I(),l=p("select");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=g(f,"DIV",{class:!0});var k=S(e);n=g(k,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1la5jfo"&&(n.textContent=a),s=E(k),l=g(k,"SELECT",{id:!0,class:!0});var u=S(l);for(let m=0;m<_.length;m+=1)_[m].l(u);u.forEach(v),k.forEach(v),this.h()},h(){i(n,"for","job"),i(n,"class","svelte-o9bud"),i(l,"id","job"),i(l,"class","svelte-o9bud"),i(e,"class","form-row svelte-o9bud")},m(f,k){Y(f,e,k),o(e,n),o(e,s),o(e,l);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m(l,null);Ie(l,t[0].Job),c||(h=Z(l,"change",t[16]),c=!0)},p(f,k){if(k[0]&8){d=ve(f[3]);let u;for(u=0;u<d.length;u+=1){const m=ta(f,d,u);_[u]?_[u].p(m,k):(_[u]=ia(m),_[u].c(),_[u].m(l,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=d.length}k[0]&3&&r!==(r=f[0].Job)&&Ie(l,f[0].Job)},d(f){f&&v(e),We(_,f),c=!1,h()}}}function oa(t){let e,n=t[28].replace(/([A-Z])/g," $1").trim()+"",a;return{c(){e=p("option"),a=se(n),this.h()},l(s){e=g(s,"OPTION",{});var l=S(e);a=re(l,n),l.forEach(v),this.h()},h(){e.__value=t[28],Oe(e,e.__value)},m(s,l){Y(s,e,l),o(e,a)},p:Ne,d(s){s&&v(e)}}}function ia(t){let e,n=t[25].replace(/([A-Z])/g," $1").trim()+"",a;return{c(){e=p("option"),a=se(n),this.h()},l(s){e=g(s,"OPTION",{});var l=S(e);a=re(l,n),l.forEach(v),this.h()},h(){e.__value=t[25],Oe(e,e.__value)},m(s,l){Y(s,e,l),o(e,a)},p:Ne,d(s){s&&v(e)}}}function ca(t){let e,n,a="Skill Ranks (0-6)",s,l,r=ve(Object.entries(t[0].SkillRanks)),c=[];for(let h=0;h<r.length;h+=1)c[h]=da($t(t,r,h));return{c(){e=p("div"),n=p("h3"),n.textContent=a,s=I(),l=p("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=g(h,"DIV",{class:!0});var d=S(e);n=g(d,"H3",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-j7sx06"&&(n.textContent=a),s=E(d),l=g(d,"DIV",{class:!0});var _=S(l);for(let f=0;f<c.length;f+=1)c[f].l(_);_.forEach(v),d.forEach(v),this.h()},h(){i(n,"class","svelte-o9bud"),i(l,"class","skills-grid svelte-o9bud"),i(e,"class","form-section svelte-o9bud")},m(h,d){Y(h,e,d),o(e,n),o(e,s),o(e,l);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(l,null)},p(h,d){if(d[0]&129){r=ve(Object.entries(h[0].SkillRanks));let _;for(_=0;_<r.length;_+=1){const f=$t(h,r,_);c[_]?c[_].p(f,d):(c[_]=da(f),c[_].c(),c[_].m(l,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=r.length}},d(h){h&&v(e),We(c,h)}}}function da(t){let e,n,a=t[21]+"",s,l,r,c,h,d,_,f,k,u,m,B,C;function x(...A){return t[19](t[21],...A)}function U(...A){return t[20](t[21],...A)}return{c(){e=p("div"),n=p("label"),s=se(a),r=I(),c=p("div"),h=p("input"),f=I(),k=p("input"),m=I(),this.h()},l(A){e=g(A,"DIV",{class:!0});var P=S(e);n=g(P,"LABEL",{for:!0,class:!0});var j=S(n);s=re(j,a),j.forEach(v),r=E(P),c=g(P,"DIV",{class:!0});var y=S(c);h=g(y,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),f=E(y),k=g(y,"INPUT",{type:!0,min:!0,max:!0,class:!0}),y.forEach(v),m=E(P),P.forEach(v),this.h()},h(){i(n,"for",l="skill-"+t[21]),i(n,"class","svelte-o9bud"),i(h,"id",d="skill-"+t[21]),i(h,"type","number"),i(h,"min","0"),i(h,"max","6"),h.value=_=t[22],i(h,"class","svelte-o9bud"),i(k,"type","range"),i(k,"min","0"),i(k,"max","6"),k.value=u=t[22],i(k,"class","svelte-o9bud"),i(c,"class","skill-input svelte-o9bud"),i(e,"class","skill-control svelte-o9bud")},m(A,P){Y(A,e,P),o(e,n),o(n,s),o(e,r),o(e,c),o(c,h),o(c,f),o(c,k),o(e,m),B||(C=[Z(h,"input",x),Z(k,"input",U)],B=!0)},p(A,P){t=A,P[0]&1&&a!==(a=t[21]+"")&&Ze(s,a),P[0]&3&&l!==(l="skill-"+t[21])&&i(n,"for",l),P[0]&3&&d!==(d="skill-"+t[21])&&i(h,"id",d),P[0]&3&&_!==(_=t[22])&&h.value!==_&&(h.value=_),P[0]&3&&u!==(u=t[22])&&(k.value=u)},d(A){A&&v(e),B=!1,pt(C)}}}function Qa(t){let e,n,a="Character Information",s,l,r,c="Basic Info",h,d,_,f="Creator Name",k,u,m,B,C,x,U="First Name",A,P,j,y,F,b,H="Last Name",w,L,T,q,O,M,W,K="Birth Date",J,D,V,G,_e,de="Must be before 1922",oe,ie,me,he="Gender",ke,ae,rt,Xe,ce,Ve,Pe="Role & Class",Se,we,Ue,Me="Class",Qe,De,je,tt,He,be,$e,st="Biography",Je,qe,Re,et,X,ge,ue=t[0].Class==="AirCrew"&&la(t),xe=ve(t[1]),fe=[];for(let R=0;R<xe.length;R+=1)fe[R]=ra(na(t,xe,R));let Be=ve(t[2]),ye=[];for(let R=0;R<Be.length;R+=1)ye[R]=sa(aa(t,Be,R));function Le(R,te){return R[0].Class==="BaseCrew"?Xa:Za}let at=Le(t),Ce=at(t),Ee=t[0].Class==="AirCrew"&&ca(t);return{c(){e=p("div"),n=p("h2"),n.textContent=a,s=I(),l=p("div"),r=p("h3"),r.textContent=c,h=I(),d=p("div"),_=p("label"),_.textContent=f,k=I(),u=p("input"),B=I(),C=p("div"),x=p("label"),x.textContent=U,A=I(),P=p("input"),y=I(),F=p("div"),b=p("label"),b.textContent=H,w=I(),L=p("input"),q=I(),ue&&ue.c(),O=I(),M=p("div"),W=p("label"),W.textContent=K,J=I(),D=p("input"),G=I(),_e=p("small"),_e.textContent=de,oe=I(),ie=p("div"),me=p("label"),me.textContent=he,ke=I(),ae=p("select");for(let R=0;R<fe.length;R+=1)fe[R].c();Xe=I(),ce=p("div"),Ve=p("h3"),Ve.textContent=Pe,Se=I(),we=p("div"),Ue=p("label"),Ue.textContent=Me,Qe=I(),De=p("select");for(let R=0;R<ye.length;R+=1)ye[R].c();tt=I(),Ce.c(),He=I(),be=p("div"),$e=p("h3"),$e.textContent=st,Je=I(),qe=p("textarea"),et=I(),Ee&&Ee.c(),this.h()},l(R){e=g(R,"DIV",{class:!0});var te=S(e);n=g(te,"H2",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1njih49"&&(n.textContent=a),s=E(te),l=g(te,"DIV",{class:!0});var $=S(l);r=g($,"H3",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1s2n6ui"&&(r.textContent=c),h=E($),d=g($,"DIV",{class:!0});var ee=S(d);_=g(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(_)!=="svelte-1wobsxy"&&(_.textContent=f),k=E(ee),u=g(ee,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ee.forEach(v),B=E($),C=g($,"DIV",{class:!0});var pe=S(C);x=g(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(x)!=="svelte-k5ejdq"&&(x.textContent=U),A=E(pe),P=g(pe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),pe.forEach(v),y=E($),F=g($,"DIV",{class:!0});var N=S(F);b=g(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(b)!=="svelte-6pkvyg"&&(b.textContent=H),w=E(N),L=g(N,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),N.forEach(v),q=E($),ue&&ue.l($),O=E($),M=g($,"DIV",{class:!0});var ne=S(M);W=g(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(W)!=="svelte-rn0zcc"&&(W.textContent=K),J=E(ne),D=g(ne,"INPUT",{id:!0,type:!0,max:!0,class:!0}),G=E(ne),_e=g(ne,"SMALL",{class:!0,"data-svelte-h":!0}),z(_e)!=="svelte-18z0swr"&&(_e.textContent=de),ne.forEach(v),oe=E($),ie=g($,"DIV",{class:!0});var Te=S(ie);me=g(Te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(me)!=="svelte-1yhvmt2"&&(me.textContent=he),ke=E(Te),ae=g(Te,"SELECT",{id:!0,class:!0});var Ge=S(ae);for(let Fe=0;Fe<fe.length;Fe+=1)fe[Fe].l(Ge);Ge.forEach(v),Te.forEach(v),$.forEach(v),Xe=E(te),ce=g(te,"DIV",{class:!0});var ze=S(ce);Ve=g(ze,"H3",{class:!0,"data-svelte-h":!0}),z(Ve)!=="svelte-13mlnk6"&&(Ve.textContent=Pe),Se=E(ze),we=g(ze,"DIV",{class:!0});var Ke=S(we);Ue=g(Ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(Ue)!=="svelte-1n4mhj6"&&(Ue.textContent=Me),Qe=E(Ke),De=g(Ke,"SELECT",{id:!0,class:!0});var Q=S(De);for(let Fe=0;Fe<ye.length;Fe+=1)ye[Fe].l(Q);Q.forEach(v),Ke.forEach(v),tt=E(ze),Ce.l(ze),ze.forEach(v),He=E(te),be=g(te,"DIV",{class:!0});var nt=S(be);$e=g(nt,"H3",{class:!0,"data-svelte-h":!0}),z($e)!=="svelte-5ztvdh"&&($e.textContent=st),Je=E(nt),qe=g(nt,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),S(qe).forEach(v),nt.forEach(v),et=E(te),Ee&&Ee.l(te),te.forEach(v),this.h()},h(){var R;i(n,"class","svelte-o9bud"),i(r,"class","svelte-o9bud"),i(_,"for","creatorName"),i(_,"class","svelte-o9bud"),i(u,"id","creatorName"),i(u,"type","text"),u.value=m=t[0].CreatorName,i(u,"placeholder","Your name"),i(u,"class","svelte-o9bud"),i(d,"class","form-row svelte-o9bud"),i(x,"for","firstName"),i(x,"class","svelte-o9bud"),i(P,"id","firstName"),i(P,"type","text"),P.value=j=t[0].FirstName,i(P,"placeholder","Character's first name"),i(P,"class","svelte-o9bud"),i(C,"class","form-row svelte-o9bud"),i(b,"for","lastName"),i(b,"class","svelte-o9bud"),i(L,"id","lastName"),i(L,"type","text"),L.value=T=t[0].LastName,i(L,"placeholder","Character's last name"),i(L,"class","svelte-o9bud"),i(F,"class","form-row svelte-o9bud"),i(W,"for","birthDate"),i(W,"class","svelte-o9bud"),i(D,"id","birthDate"),i(D,"type","date"),D.value=V=t[0].BirthDate,i(D,"max","1921-12-31"),i(D,"class","svelte-o9bud"),i(_e,"class","svelte-o9bud"),i(M,"class","form-row svelte-o9bud"),i(me,"for","gender"),i(me,"class","svelte-o9bud"),i(ae,"id","gender"),i(ae,"class","svelte-o9bud"),i(ie,"class","form-row svelte-o9bud"),i(l,"class","form-section svelte-o9bud"),i(Ve,"class","svelte-o9bud"),i(Ue,"for","class"),i(Ue,"class","svelte-o9bud"),i(De,"id","class"),i(De,"class","svelte-o9bud"),i(we,"class","form-row svelte-o9bud"),i(ce,"class","form-section svelte-o9bud"),i($e,"class","svelte-o9bud"),qe.value=Re=((R=t[0].Biography)==null?void 0:R.en)||"",i(qe,"placeholder","Write the character's background story..."),i(qe,"rows","4"),i(qe,"class","svelte-o9bud"),i(be,"class","form-section svelte-o9bud"),i(e,"class","metadata-container svelte-o9bud")},m(R,te){Y(R,e,te),o(e,n),o(e,s),o(e,l),o(l,r),o(l,h),o(l,d),o(d,_),o(d,k),o(d,u),o(l,B),o(l,C),o(C,x),o(C,A),o(C,P),o(l,y),o(l,F),o(F,b),o(F,w),o(F,L),o(l,q),ue&&ue.m(l,null),o(l,O),o(l,M),o(M,W),o(M,J),o(M,D),o(M,G),o(M,_e),o(l,oe),o(l,ie),o(ie,me),o(ie,ke),o(ie,ae);for(let $=0;$<fe.length;$+=1)fe[$]&&fe[$].m(ae,null);Ie(ae,t[0].Gender),o(e,Xe),o(e,ce),o(ce,Ve),o(ce,Se),o(ce,we),o(we,Ue),o(we,Qe),o(we,De);for(let $=0;$<ye.length;$+=1)ye[$]&&ye[$].m(De,null);Ie(De,t[0].Class),o(ce,tt),Ce.m(ce,null),o(e,He),o(e,be),o(be,$e),o(be,Je),o(be,qe),o(e,et),Ee&&Ee.m(e,null),X||(ge=[Z(u,"input",t[9]),Z(P,"input",t[10]),Z(L,"input",t[11]),Z(D,"input",t[13]),Z(ae,"change",t[14]),Z(De,"change",t[15]),Z(qe,"input",t[18])],X=!0)},p(R,te){var $;if(te[0]&3&&m!==(m=R[0].CreatorName)&&u.value!==m&&(u.value=m),te[0]&3&&j!==(j=R[0].FirstName)&&P.value!==j&&(P.value=j),te[0]&3&&T!==(T=R[0].LastName)&&L.value!==T&&(L.value=T),R[0].Class==="AirCrew"?ue?ue.p(R,te):(ue=la(R),ue.c(),ue.m(l,O)):ue&&(ue.d(1),ue=null),te[0]&3&&V!==(V=R[0].BirthDate)&&(D.value=V),te[0]&2){xe=ve(R[1]);let ee;for(ee=0;ee<xe.length;ee+=1){const pe=na(R,xe,ee);fe[ee]?fe[ee].p(pe,te):(fe[ee]=ra(pe),fe[ee].c(),fe[ee].m(ae,null))}for(;ee<fe.length;ee+=1)fe[ee].d(1);fe.length=xe.length}if(te[0]&3&&rt!==(rt=R[0].Gender)&&Ie(ae,R[0].Gender),te[0]&4){Be=ve(R[2]);let ee;for(ee=0;ee<Be.length;ee+=1){const pe=aa(R,Be,ee);ye[ee]?ye[ee].p(pe,te):(ye[ee]=sa(pe),ye[ee].c(),ye[ee].m(De,null))}for(;ee<ye.length;ee+=1)ye[ee].d(1);ye.length=Be.length}te[0]&3&&je!==(je=R[0].Class)&&Ie(De,R[0].Class),at===(at=Le(R))&&Ce?Ce.p(R,te):(Ce.d(1),Ce=at(R),Ce&&(Ce.c(),Ce.m(ce,null))),te[0]&3&&Re!==(Re=(($=R[0].Biography)==null?void 0:$.en)||"")&&(qe.value=Re),R[0].Class==="AirCrew"?Ee?Ee.p(R,te):(Ee=ca(R),Ee.c(),Ee.m(e,null)):Ee&&(Ee.d(1),Ee=null)},i:Ne,o:Ne,d(R){R&&v(e),ue&&ue.d(),We(fe,R),We(ye,R),Ce.d(),Ee&&Ee.d(),X=!1,pt(ge)}}}function $a(t,e,n){let{metadata:a={}}=e;if(!a.Id){let b;try{b=crypto.randomUUID()}catch{b=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}a={Id:b,CreatorName:"",FirstName:"",LastName:"",Nickname:"",BirthDate:"1920-01-01",Gender:"Male",Class:"AirCrew",Job:"None",Role:"Pilot",Biography:{en:""},SkillRanks:{Flying:0,Shooting:0,Bombing:0,Endurance:0,Engineering:0,Navigating:0}}}const s=["Male","Female"],l=["AirCrew","BaseCrew"],r=["None","AAFCook","FieldMechanic","FieldEngineer","RAFMedic","AAFLabour"],c=["None","Pilot","Gunner","Navigator","BombAimer","FlightEngineer","RadioOperator"];function h(b,H){n(0,a={...a,[b]:H})}function d(b){n(0,a={...a,Biography:{...a.Biography,en:b}})}function _(b,H){const w=Math.max(0,Math.min(6,parseInt(H)||0));n(0,a={...a,SkillRanks:{...a.SkillRanks,[b]:w}})}function f(b){b==="BaseCrew"?n(0,a={...a,Class:b,Role:"None"}):n(0,a={...a,Class:b,Job:"None"})}const k=b=>h("CreatorName",b.target.value),u=b=>h("FirstName",b.target.value),m=b=>h("LastName",b.target.value),B=b=>h("Nickname",b.target.value),C=b=>h("BirthDate",b.target.value),x=b=>h("Gender",b.target.value),U=b=>f(b.target.value),A=b=>h("Job",b.target.value),P=b=>h("Role",b.target.value),j=b=>d(b.target.value),y=(b,H)=>_(b,H.target.value),F=(b,H)=>_(b,H.target.value);return t.$$set=b=>{"metadata"in b&&n(0,a=b.metadata)},[a,s,l,r,c,h,d,_,f,k,u,m,B,C,x,U,A,P,j,y,F]}class en extends vt{constructor(e){super(),mt(this,e,$a,Qa,gt,{metadata:0},null,[-1,-1])}}function ha(t,e,n){const a=t.slice();return a[11]=e[n],a[12]=e,a[13]=n,a}function ua(t){let e,n="Ã—",a,s;function l(){return t[7](t[13])}return{c(){e=p("button"),e.textContent=n,this.h()},l(r){e=g(r,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(e)!=="svelte-13tipsw"&&(e.textContent=n),this.h()},h(){i(e,"class","delete-btn svelte-hommpg"),i(e,"title","Delete crew member")},m(r,c){Y(r,e,c),a||(s=Z(e,"click",Aa(l)),a=!0)},p(r,c){t=r},d(r){r&&v(e),a=!1,s()}}}function _a(t){var H,w,L,T;let e,n,a=t[13],s,l,r,c=(((H=t[11].metadata)==null?void 0:H.FirstName)||"Unnamed")+"",h,d,_=(((w=t[11].metadata)==null?void 0:w.LastName)||"")+"",f,k,u,m=(((L=t[11].metadata)==null?void 0:L.Role)||((T=t[11].metadata)==null?void 0:T.Job)||"No Role")+"",B,C,x,U,A;const P=()=>t[6](n,a),j=()=>t[6](null,a);let y=t[0].length>1&&ua(t);function F(){return t[8](t[13])}function b(...q){return t[9](t[13],...q)}return{c(){e=p("div"),n=p("canvas"),s=I(),l=p("div"),r=p("div"),h=se(c),d=I(),f=se(_),k=I(),u=p("div"),B=se(m),C=I(),y&&y.c(),x=I(),this.h()},l(q){e=g(q,"DIV",{class:!0,role:!0,tabindex:!0});var O=S(e);n=g(O,"CANVAS",{width:!0,height:!0,class:!0}),S(n).forEach(v),s=E(O),l=g(O,"DIV",{class:!0});var M=S(l);r=g(M,"DIV",{class:!0});var W=S(r);h=re(W,c),d=E(W),f=re(W,_),W.forEach(v),k=E(M),u=g(M,"DIV",{class:!0});var K=S(u);B=re(K,m),K.forEach(v),M.forEach(v),C=E(O),y&&y.l(O),x=E(O),O.forEach(v),this.h()},h(){i(n,"width","100"),i(n,"height","100"),i(n,"class","crew-thumbnail svelte-hommpg"),i(r,"class","crew-name svelte-hommpg"),i(u,"class","crew-role svelte-hommpg"),i(l,"class","crew-info svelte-hommpg"),i(e,"class","crew-card svelte-hommpg"),i(e,"role","button"),i(e,"tabindex","0"),lt(e,"selected",t[13]===t[1])},m(q,O){Y(q,e,O),o(e,n),P(),o(e,s),o(e,l),o(l,r),o(r,h),o(r,d),o(r,f),o(l,k),o(l,u),o(u,B),o(e,C),y&&y.m(e,null),o(e,x),U||(A=[Z(e,"click",F),Z(e,"keydown",b)],U=!0)},p(q,O){var M,W,K,J;t=q,a!==t[13]&&(j(),a=t[13],P()),O&1&&c!==(c=(((M=t[11].metadata)==null?void 0:M.FirstName)||"Unnamed")+"")&&Ze(h,c),O&1&&_!==(_=(((W=t[11].metadata)==null?void 0:W.LastName)||"")+"")&&Ze(f,_),O&1&&m!==(m=(((K=t[11].metadata)==null?void 0:K.Role)||((J=t[11].metadata)==null?void 0:J.Job)||"No Role")+"")&&Ze(B,m),t[0].length>1?y?y.p(t,O):(y=ua(t),y.c(),y.m(e,x)):y&&(y.d(1),y=null),O&2&&lt(e,"selected",t[13]===t[1])},d(q){q&&v(e),j(),y&&y.d(),U=!1,pt(A)}}}function tn(t){let e,n,a,s,l=t[0].length+"",r,c,h,d,_="+ New Member",f,k,u,m,B=ve(t[0]),C=[];for(let x=0;x<B.length;x+=1)C[x]=_a(ha(t,B,x));return{c(){e=p("div"),n=p("div"),a=p("h3"),s=se("Crew Members ("),r=se(l),c=se(")"),h=I(),d=p("button"),d.textContent=_,f=I(),k=p("div");for(let x=0;x<C.length;x+=1)C[x].c();this.h()},l(x){e=g(x,"DIV",{class:!0});var U=S(e);n=g(U,"DIV",{class:!0});var A=S(n);a=g(A,"H3",{class:!0});var P=S(a);s=re(P,"Crew Members ("),r=re(P,l),c=re(P,")"),P.forEach(v),h=E(A),d=g(A,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(d)!=="svelte-fj2x57"&&(d.textContent=_),A.forEach(v),f=E(U),k=g(U,"DIV",{class:!0});var j=S(k);for(let y=0;y<C.length;y+=1)C[y].l(j);j.forEach(v),U.forEach(v),this.h()},h(){i(a,"class","svelte-hommpg"),i(d,"class","add-btn svelte-hommpg"),i(d,"title","Add new crew member"),i(n,"class","crew-header svelte-hommpg"),i(k,"class","crew-grid svelte-hommpg"),i(e,"class","crew-list-container svelte-hommpg")},m(x,U){Y(x,e,U),o(e,n),o(n,a),o(a,s),o(a,r),o(a,c),o(n,h),o(n,d),o(e,f),o(e,k);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(k,null);u||(m=Z(d,"click",function(){Ia(t[4])&&t[4].apply(this,arguments)}),u=!0)},p(x,[U]){if(t=x,U&1&&l!==(l=t[0].length+"")&&Ze(r,l),U&47){B=ve(t[0]);let A;for(A=0;A<B.length;A+=1){const P=ha(t,B,A);C[A]?C[A].p(P,U):(C[A]=_a(P),C[A].c(),C[A].m(k,null))}for(;A<C.length;A+=1)C[A].d(1);C.length=B.length}},i:Ne,o:Ne,d(x){x&&v(e),We(C,x),u=!1,m()}}}function an(t){return new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.onerror=()=>e(null),n.src=t})}function Nt(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const a=n.getContext("2d");return a.drawImage(t,0,0),a.globalCompositeOperation="multiply",a.fillStyle=e,a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="destination-in",a.drawImage(t,0,0),n}function nn(t,e,n){let{crew:a=[]}=e,{selectedIndex:s=0}=e,{onSelect:l=m=>{}}=e,{onDelete:r=m=>{}}=e,{onAdd:c=()=>{}}=e;async function h(m,B){var F,b,H,w,L,T,q,O,M,W,K,J,D,V,G,_e;const C=B.getContext("2d"),x=100;C.clearRect(0,0,x,x);const U=((H=le.Skin[((b=(F=m.character)==null?void 0:F.colorIndices)==null?void 0:b.Skin)??2])==null?void 0:H.hex)??le.Skin[2].hex,A=((T=le.Hair[((L=(w=m.character)==null?void 0:w.colorIndices)==null?void 0:L.Hair)??3])==null?void 0:T.hex)??le.Hair[3].hex,P=((M=le.Eye[((O=(q=m.character)==null?void 0:q.colorIndices)==null?void 0:O.Eye)??2])==null?void 0:M.hex)??le.Eye[2].hex,j=((J=le.Accessory[((K=(W=m.character)==null?void 0:W.colorIndices)==null?void 0:K.Accessory)??1])==null?void 0:J.hex)??le.Accessory[1].hex,y=Object.entries(ft).sort((de,oe)=>oe[1].id-de[1].id);for(const[de,oe]of y){const ie=(V=(D=m.character)==null?void 0:D.parts)==null?void 0:V[de];if(!ie||ie.index===-1||ie.variant===-1)continue;if(de==="Mouth"){const he=(_e=(G=m.character)==null?void 0:G.parts)==null?void 0:_e.Moustache;if(he&&he.index!==-1)continue}const me=Ea(de,ie.index,ie.variant);if(me)try{const he=await an(me);if(he){let ke=he;oe.useSkinColor?ke=Nt(he,U):oe.useHairColor?ke=Nt(he,A):oe.useEyeColor?ke=Nt(he,P):oe.useAccessoryColor&&(ke=Nt(he,j));const ae=Math.min(x/ke.width,x/ke.height),rt=ke.width*ae,Xe=ke.height*ae,ce=(x-rt)/2,Ve=(x-Xe)/2;C.drawImage(ke,ce,Ve,rt,Xe)}}catch(he){console.warn(`Failed to render layer ${de}:`,he)}}}let d=[];function _(m,B){It[m?"unshift":"push"](()=>{d[B]=m,n(5,d)})}const f=m=>r(m),k=m=>l(m),u=(m,B)=>B.key==="Enter"&&l(m);return t.$$set=m=>{"crew"in m&&n(0,a=m.crew),"selectedIndex"in m&&n(1,s=m.selectedIndex),"onSelect"in m&&n(2,l=m.onSelect),"onDelete"in m&&n(3,r=m.onDelete),"onAdd"in m&&n(4,c=m.onAdd)},t.$$.update=()=>{t.$$.dirty&33&&a.length>0&&d.length>0&&a.forEach((m,B)=>{d[B]&&h(m,d[B])})},[a,s,l,r,c,d,_,f,k,u]}class ln extends vt{constructor(e){super(),mt(this,e,nn,tn,gt,{crew:0,selectedIndex:1,onSelect:2,onDelete:3,onAdd:4})}}globalThis.__sveltekit_1ugoboa.env;function fa(t,e,n){const a=t.slice();return a[12]=e[n],a}function ga(t){let e,n=t[12]+"",a,s,l,r;function c(){return t[9](t[12])}return{c(){e=p("button"),a=se(n),s=I(),this.h()},l(h){e=g(h,"BUTTON",{class:!0});var d=S(e);a=re(d,n),s=E(d),d.forEach(v),this.h()},h(){i(e,"class","example-btn svelte-1shtk8n")},m(h,d){Y(h,e,d),o(e,a),o(e,s),l||(r=Z(e,"click",c),l=!0)},p(h,d){t=h},d(h){h&&v(e),l=!1,r()}}}function pa(t){let e,n,a="Error:",s,l;return{c(){e=p("div"),n=p("strong"),n.textContent=a,s=I(),l=se(t[3]),this.h()},l(r){e=g(r,"DIV",{class:!0});var c=S(e);n=g(c,"STRONG",{"data-svelte-h":!0}),z(n)!=="svelte-1s1dywc"&&(n.textContent=a),s=E(c),l=re(c,t[3]),c.forEach(v),this.h()},h(){i(e,"class","error-message svelte-1shtk8n")},m(r,c){Y(r,e,c),o(e,n),o(e,s),o(e,l)},p(r,c){c&8&&Ze(l,r[3])},d(r){r&&v(e)}}}function va(t){let e,n;return{c(){e=p("div"),n=se(t[4]),this.h()},l(a){e=g(a,"DIV",{class:!0});var s=S(e);n=re(s,t[4]),s.forEach(v),this.h()},h(){i(e,"class","success-message svelte-1shtk8n")},m(a,s){Y(a,e,s),o(e,n)},p(a,s){s&16&&Ze(n,a[4])},d(a){a&&v(e)}}}function rn(t){let e;return{c(){e=se("âœ¨ Generate Crew")},l(n){e=re(n,"âœ¨ Generate Crew")},m(n,a){Y(n,e,a)},d(n){n&&v(e)}}}function sn(t){let e,n;return{c(){e=p("span"),n=se(`
			Generating crew...`),this.h()},l(a){e=g(a,"SPAN",{class:!0}),S(e).forEach(v),n=re(a,`
			Generating crew...`),this.h()},h(){i(e,"class","spinner svelte-1shtk8n")},m(a,s){Y(a,e,s),Y(a,n,s)},d(a){a&&(v(e),v(n))}}}function on(t){let e,n,a='<h3 class="svelte-1shtk8n">ðŸ¤– AI Crew Generator</h3> <p class="svelte-1shtk8n">Describe your crew and let AI generate authentic characters with backgrounds</p> <p class="limit-note svelte-1shtk8n">Maximum 10 crew members per generation</p>',s,l,r,c="Quick examples:",h,d,_,f,k,u="Crew Description",m,B,C,x,U,A,P,j,y,F,b,H,w,L,T=ve(t[6]),q=[];for(let D=0;D<T.length;D+=1)q[D]=ga(fa(t,T,D));let O=t[3]&&pa(t),M=t[4]&&va(t);function W(D,V){return D[2]?sn:rn}let K=W(t),J=K(t);return{c(){e=p("div"),n=p("div"),n.innerHTML=a,s=I(),l=p("div"),r=p("label"),r.textContent=c,h=I(),d=p("div");for(let D=0;D<q.length;D+=1)q[D].c();_=I(),f=p("div"),k=p("label"),k.textContent=u,m=I(),B=p("textarea"),C=I(),x=p("div"),U=p("label"),A=p("input"),P=se(`
			Replace existing crew (otherwise adds to current crew)`),j=I(),O&&O.c(),y=I(),M&&M.c(),F=I(),b=p("button"),J.c(),this.h()},l(D){e=g(D,"DIV",{class:!0});var V=S(e);n=g(V,"DIV",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-h0xsof"&&(n.innerHTML=a),s=E(V),l=g(V,"DIV",{class:!0});var G=S(l);r=g(G,"LABEL",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1w70uyc"&&(r.textContent=c),h=E(G),d=g(G,"DIV",{class:!0});var _e=S(d);for(let he=0;he<q.length;he+=1)q[he].l(_e);_e.forEach(v),G.forEach(v),_=E(V),f=g(V,"DIV",{class:!0});var de=S(f);k=g(de,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(k)!=="svelte-4rogx7"&&(k.textContent=u),m=E(de),B=g(de,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),S(B).forEach(v),de.forEach(v),C=E(V),x=g(V,"DIV",{class:!0});var oe=S(x);U=g(oe,"LABEL",{class:!0});var ie=S(U);A=g(ie,"INPUT",{type:!0,class:!0}),P=re(ie,`
			Replace existing crew (otherwise adds to current crew)`),ie.forEach(v),oe.forEach(v),j=E(V),O&&O.l(V),y=E(V),M&&M.l(V),F=E(V),b=g(V,"BUTTON",{class:!0});var me=S(b);J.l(me),me.forEach(v),V.forEach(v),this.h()},h(){i(n,"class","generator-header svelte-1shtk8n"),i(r,"class","svelte-1shtk8n"),i(d,"class","example-buttons svelte-1shtk8n"),i(l,"class","examples svelte-1shtk8n"),i(k,"for","crew-description"),i(k,"class","svelte-1shtk8n"),i(B,"id","crew-description"),i(B,"placeholder","E.g., 'Create a crew of 10 Polish pilots from 303 Squadron with varied experience levels'"),i(B,"rows","4"),B.disabled=t[2],i(B,"class","svelte-1shtk8n"),i(f,"class","input-section svelte-1shtk8n"),i(A,"type","checkbox"),A.disabled=t[2],i(A,"class","svelte-1shtk8n"),i(U,"class","checkbox-label svelte-1shtk8n"),i(x,"class","options svelte-1shtk8n"),i(b,"class","generate-btn svelte-1shtk8n"),b.disabled=H=t[2]||!t[0].trim(),i(e,"class","generator-container svelte-1shtk8n")},m(D,V){Y(D,e,V),o(e,n),o(e,s),o(e,l),o(l,r),o(l,h),o(l,d);for(let G=0;G<q.length;G+=1)q[G]&&q[G].m(d,null);o(e,_),o(e,f),o(f,k),o(f,m),o(f,B),Oe(B,t[0]),o(e,C),o(e,x),o(x,U),o(U,A),A.checked=t[1],o(U,P),o(e,j),O&&O.m(e,null),o(e,y),M&&M.m(e,null),o(e,F),o(e,b),J.m(b,null),w||(L=[Z(B,"input",t[10]),Z(A,"change",t[11]),Z(b,"click",t[5])],w=!0)},p(D,[V]){if(V&192){T=ve(D[6]);let G;for(G=0;G<T.length;G+=1){const _e=fa(D,T,G);q[G]?q[G].p(_e,V):(q[G]=ga(_e),q[G].c(),q[G].m(d,null))}for(;G<q.length;G+=1)q[G].d(1);q.length=T.length}V&4&&(B.disabled=D[2]),V&1&&Oe(B,D[0]),V&4&&(A.disabled=D[2]),V&2&&(A.checked=D[1]),D[3]?O?O.p(D,V):(O=pa(D),O.c(),O.m(e,y)):O&&(O.d(1),O=null),D[4]?M?M.p(D,V):(M=va(D),M.c(),M.m(e,F)):M&&(M.d(1),M=null),K!==(K=W(D))&&(J.d(1),J=K(D),J&&(J.c(),J.m(b,null))),V&5&&H!==(H=D[2]||!D[0].trim())&&(b.disabled=H)},i:Ne,o:Ne,d(D){D&&v(e),We(q,D),O&&O.d(),M&&M.d(),J.d(),w=!1,pt(L)}}}const cn="https://blindflugstudios.pythonanywhere.com";function dn(t,e,n){let{onCrewGenerated:a=B=>{}}=e,s="",l=!1,r=!1,c="",h="";async function d(){if(!s.trim()){n(3,c="Please enter a description");return}n(2,r=!0),n(3,c=""),n(4,h="");try{const B=await fetch(`${cn}/api/generate-crew`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:s,replaceExisting:l})}),C=await B.json();if(!B.ok)throw new Error(C.error||"Failed to generate crew");a(C.crew,C.replaceExisting),n(4,h=`Successfully generated ${C.count} crew member${C.count!==1?"s":""}!`),n(0,s="")}catch(B){n(3,c=B.message),console.error("Crew generation error:",B)}finally{n(2,r=!1)}}const _=["Create a crew of 10 Polish pilots from 303 Squadron","Generate 5 American bomber crew members from the 8th Air Force","Create 8 British ground crew mechanics and engineers","Generate a diverse crew of 6 female pilots from the ATA","Create 10 Canadian aircrew from 6 Group Bomber Command"];function f(B){n(0,s=B)}const k=B=>f(B);function u(){s=this.value,n(0,s)}function m(){l=this.checked,n(1,l)}return t.$$set=B=>{"onCrewGenerated"in B&&n(8,a=B.onCrewGenerated)},[s,l,r,c,h,d,_,f,a,k,u,m]}class hn extends vt{constructor(e){super(),mt(this,e,dn,on,gt,{onCrewGenerated:8})}}function un(t){let e,n,a,s,l='<div class="upload-icon svelte-hxjsx9">ðŸ“·</div> <p class="upload-text svelte-hxjsx9">Click to upload or drag &amp; drop</p> <small class="upload-hint svelte-hxjsx9">JPEG, PNG, HEIC, WebP (max 2MB)</small>',r,c;return{c(){e=p("div"),n=p("input"),a=I(),s=p("label"),s.innerHTML=l,this.h()},l(h){e=g(h,"DIV",{class:!0,role:!0,tabindex:!0});var d=S(e);n=g(d,"INPUT",{type:!0,accept:!0,id:!0,style:!0}),a=E(d),s=g(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(s)!=="svelte-lqjzoy"&&(s.innerHTML=l),d.forEach(v),this.h()},h(){i(n,"type","file"),i(n,"accept","image/jpeg,image/png,image/heic,image/webp"),i(n,"id","photo-upload"),ht(n,"display","none"),i(s,"for","photo-upload"),i(s,"class","svelte-hxjsx9"),i(e,"class","drop-zone svelte-hxjsx9"),i(e,"role","button"),i(e,"tabindex","0"),lt(e,"drag-active",t[2])},m(h,d){Y(h,e,d),o(e,n),o(e,a),o(e,s),r||(c=[Z(n,"change",t[3]),Z(e,"drop",t[6]),Z(e,"dragover",t[4]),Z(e,"dragleave",t[5])],r=!0)},p(h,d){d&4&&lt(e,"drag-active",h[2])},d(h){h&&v(e),r=!1,pt(c)}}}function _n(t){let e,n='<div class="spinner svelte-hxjsx9"></div> <p class="svelte-hxjsx9">Analyzing photo...</p> <small class="svelte-hxjsx9">This may take a few seconds</small>';return{c(){e=p("div"),e.innerHTML=n,this.h()},l(a){e=g(a,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1wzbpvd"&&(e.innerHTML=n),this.h()},h(){i(e,"class","analyzing svelte-hxjsx9")},m(a,s){Y(a,e,s)},p:Ne,d(a){a&&v(e)}}}function ma(t){let e,n,a="Error:",s,l;return{c(){e=p("div"),n=p("strong"),n.textContent=a,s=I(),l=se(t[1]),this.h()},l(r){e=g(r,"DIV",{class:!0});var c=S(e);n=g(c,"STRONG",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1s1dywc"&&(n.textContent=a),s=E(c),l=re(c,t[1]),c.forEach(v),this.h()},h(){i(n,"class","svelte-hxjsx9"),i(e,"class","error svelte-hxjsx9")},m(r,c){Y(r,e,c),o(e,n),o(e,s),o(e,l)},p(r,c){c&2&&Ze(l,r[1])},d(r){r&&v(e)}}}function fn(t){let e,n,a="ðŸ“¸ Generate from Photo",s,l,r="Upload a portrait photo to automatically generate a matching character",c,h;function d(u,m){return u[0]?_n:un}let _=d(t),f=_(t),k=t[1]&&ma(t);return{c(){e=p("div"),n=p("h3"),n.textContent=a,s=I(),l=p("p"),l.textContent=r,c=I(),f.c(),h=I(),k&&k.c(),this.h()},l(u){e=g(u,"DIV",{class:!0});var m=S(e);n=g(m,"H3",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1fnkliw"&&(n.textContent=a),s=E(m),l=g(m,"P",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1g71ewu"&&(l.textContent=r),c=E(m),f.l(m),h=E(m),k&&k.l(m),m.forEach(v),this.h()},h(){i(n,"class","svelte-hxjsx9"),i(l,"class","description svelte-hxjsx9"),i(e,"class","upload-container svelte-hxjsx9")},m(u,m){Y(u,e,m),o(e,n),o(e,s),o(e,l),o(e,c),f.m(e,null),o(e,h),k&&k.m(e,null)},p(u,[m]){_===(_=d(u))&&f?f.p(u,m):(f.d(1),f=_(u),f&&(f.c(),f.m(e,h))),u[1]?k?k.p(u,m):(k=ma(u),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:Ne,o:Ne,d(u){u&&v(e),f.d(),k&&k.d()}}}function gn(t,e,n){let{onPhotoAnalyzed:a=k=>{}}=e,s=!1,l=null,r=!1;async function c(k){var B,C,x,U;const u=((C=(B=k.target)==null?void 0:B.files)==null?void 0:C[0])||((U=(x=k.dataTransfer)==null?void 0:x.files)==null?void 0:U[0]);if(!u)return;if(n(1,l=null),!["image/jpeg","image/png","image/heic","image/webp"].includes(u.type)){n(1,l="Invalid file type. Please upload JPEG, PNG, HEIC, or WebP");return}if(u.size>2*1024*1024){n(1,l="File too large. Maximum size is 2MB");return}await h(u)}async function h(k){n(0,s=!0),n(1,l=null);try{const u=new FileReader,m=await new Promise((U,A)=>{u.onload=()=>U(u.result.split(",")[1]),u.onerror=A,u.readAsDataURL(k)});console.log("Uploading photo for analysis...");const C=await fetch("https://blindflugstudios.pythonanywhere.com/api/analyze-photo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:m,mimeType:k.type})});if(!C.ok){const U=await C.json();throw new Error(U.error||"Analysis failed")}const x=await C.json();console.log("Photo analyzed successfully!"),a(x.character)}catch(u){console.error("Photo analysis error:",u),n(1,l=u.message||"Failed to analyze photo. Please try again.")}finally{n(0,s=!1)}}function d(k){k.preventDefault(),n(2,r=!0)}function _(){n(2,r=!1)}function f(k){k.preventDefault(),n(2,r=!1),c(k)}return t.$$set=k=>{"onPhotoAnalyzed"in k&&n(7,a=k.onPhotoAnalyzed)},[s,l,r,c,d,_,f,a]}class pn extends vt{constructor(e){super(),mt(this,e,gn,fn,gt,{onPhotoAnalyzed:7})}}const{document:Mt}=Da;function vn(t){let e,n,a;function s(r){t[20](r)}let l={};return t[3]!==void 0&&(l.metadata=t[3]),e=new en({props:l}),It.push(()=>Ca(e,"metadata",s)),{c(){Ct(e.$$.fragment)},l(r){yt(e.$$.fragment,r)},m(r,c){bt(e,r,c),a=!0},p(r,c){const h={};!n&&c&8&&(n=!0,h.metadata=r[3],ya(()=>n=!1)),e.$set(h)},i(r){a||(_t(e.$$.fragment,r),a=!0)},o(r){ut(e.$$.fragment,r),a=!1},d(r){kt(e,r)}}}function mn(t){let e,n,a;function s(r){t[19](r)}let l={};return t[2]!==void 0&&(l.character=t[2]),e=new Ya({props:l}),It.push(()=>Ca(e,"character",s)),{c(){Ct(e.$$.fragment)},l(r){yt(e.$$.fragment,r)},m(r,c){bt(e,r,c),a=!0},p(r,c){const h={};!n&&c&4&&(n=!0,h.character=r[2],ya(()=>n=!1)),e.$set(h)},i(r){a||(_t(e.$$.fragment,r),a=!0)},o(r){ut(e.$$.fragment,r),a=!1},d(r){kt(e,r)}}}function kn(t){let e,n,a,s,l='<h1 class="svelte-s92g1y">Crew Portrait Generator</h1> <p class="svelte-s92g1y">Create and manage your entire crew with customizable portraits and metadata</p>',r,c,h,d,_,f,k,u,m,B,C,x,U=(t[3].FirstName||"Unnamed")+"",A,P,j=(t[3].LastName||"")+"",y,F,b,H,w,L,T="ðŸ’¾ Download PNG",q,O,M="ðŸ“„ Export Character",W,K,J="ðŸ“¤ Share",D,V,G,_e="ðŸ“¦ Export Crew",de,oe,ie="ðŸ“¥ Import Crew",me,he,ke,ae,rt="Appearance",Xe,ce,Ve="Character Info",Pe,Se,we,Ue,Me,Qe,De,je=t[0].length+"",tt,He,be,$e,st;h=new hn({props:{onCrewGenerated:t[9]}}),_=new pn({props:{onPhotoAnalyzed:t[10]}}),k=new ln({props:{crew:t[0],selectedIndex:t[1],onSelect:t[8],onDelete:t[7],onAdd:t[6]}});let Je={character:t[2],canvasSize:512};b=new Ha({props:Je}),t[16](b);const qe=[mn,vn],Re=[];function et(X,ge){return X[5]==="appearance"?0:1}return Se=et(t),we=Re[Se]=qe[Se](t),{c(){e=p("meta"),n=I(),a=p("main"),s=p("header"),s.innerHTML=l,r=I(),c=p("div"),Ct(h.$$.fragment),d=I(),Ct(_.$$.fragment),f=I(),Ct(k.$$.fragment),u=I(),m=p("div"),B=p("div"),C=p("h3"),x=se("Editing: "),A=se(U),P=I(),y=se(j),F=I(),Ct(b.$$.fragment),H=I(),w=p("div"),L=p("button"),L.textContent=T,q=I(),O=p("button"),O.textContent=M,W=I(),K=p("button"),K.textContent=J,D=I(),V=p("div"),G=p("button"),G.textContent=_e,de=I(),oe=p("button"),oe.textContent=ie,me=I(),he=p("div"),ke=p("div"),ae=p("button"),ae.textContent=rt,Xe=I(),ce=p("button"),ce.textContent=Ve,Pe=I(),we.c(),Ue=I(),Me=p("footer"),Qe=p("p"),De=se("Built with SvelteKit â€¢ "),tt=se(je),He=se(" crew member(s) â€¢ Advanced color system"),this.h()},l(X){const ge=xa("svelte-5ab5xd",Mt.head);e=g(ge,"META",{name:!0,content:!0}),ge.forEach(v),n=E(X),a=g(X,"MAIN",{class:!0});var ue=S(a);s=g(ue,"HEADER",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-f6mz9t"&&(s.innerHTML=l),r=E(ue),c=g(ue,"DIV",{class:!0});var xe=S(c);yt(h.$$.fragment,xe),d=E(xe),yt(_.$$.fragment,xe),f=E(xe),yt(k.$$.fragment,xe),u=E(xe),m=g(xe,"DIV",{class:!0});var fe=S(m);B=g(fe,"DIV",{class:!0});var Be=S(B);C=g(Be,"H3",{class:!0});var ye=S(C);x=re(ye,"Editing: "),A=re(ye,U),P=E(ye),y=re(ye,j),ye.forEach(v),F=E(Be),yt(b.$$.fragment,Be),H=E(Be),w=g(Be,"DIV",{class:!0});var Le=S(w);L=g(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),z(L)!=="svelte-r459xr"&&(L.textContent=T),q=E(Le),O=g(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),z(O)!=="svelte-3gnt7w"&&(O.textContent=M),W=E(Le),K=g(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),z(K)!=="svelte-1mnm7e1"&&(K.textContent=J),Le.forEach(v),D=E(Be),V=g(Be,"DIV",{class:!0});var at=S(V);G=g(at,"BUTTON",{class:!0,"data-svelte-h":!0}),z(G)!=="svelte-rn379l"&&(G.textContent=_e),de=E(at),oe=g(at,"BUTTON",{class:!0,"data-svelte-h":!0}),z(oe)!=="svelte-ee8so5"&&(oe.textContent=ie),at.forEach(v),Be.forEach(v),me=E(fe),he=g(fe,"DIV",{class:!0});var Ce=S(he);ke=g(Ce,"DIV",{class:!0});var Ee=S(ke);ae=g(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),z(ae)!=="svelte-7tu4lg"&&(ae.textContent=rt),Xe=E(Ee),ce=g(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),z(ce)!=="svelte-1i6npxl"&&(ce.textContent=Ve),Ee.forEach(v),Pe=E(Ce),we.l(Ce),Ce.forEach(v),fe.forEach(v),xe.forEach(v),Ue=E(ue),Me=g(ue,"FOOTER",{class:!0});var R=S(Me);Qe=g(R,"P",{});var te=S(Qe);De=re(te,"Built with SvelteKit â€¢ "),tt=re(te,je),He=re(te," crew member(s) â€¢ Advanced color system"),te.forEach(v),R.forEach(v),ue.forEach(v),this.h()},h(){Mt.title="Crew Portrait Generator",i(e,"name","description"),i(e,"content","Create custom character portraits for your crew"),i(s,"class","svelte-s92g1y"),i(C,"class","current-member-title svelte-s92g1y"),i(L,"class","export-btn svelte-s92g1y"),i(O,"class","json-btn svelte-s92g1y"),i(K,"class","share-btn svelte-s92g1y"),i(w,"class","portrait-actions svelte-s92g1y"),i(G,"class","crew-export-btn svelte-s92g1y"),i(oe,"class","crew-import-btn svelte-s92g1y"),i(V,"class","crew-actions svelte-s92g1y"),i(B,"class","portrait-section svelte-s92g1y"),i(ae,"class","tab svelte-s92g1y"),lt(ae,"active",t[5]==="appearance"),i(ce,"class","tab svelte-s92g1y"),lt(ce,"active",t[5]==="info"),i(ke,"class","tabs svelte-s92g1y"),i(he,"class","controls-section svelte-s92g1y"),i(m,"class","generator-container svelte-s92g1y"),i(c,"class","main-container svelte-s92g1y"),i(Me,"class","svelte-s92g1y"),i(a,"class","svelte-s92g1y")},m(X,ge){o(Mt.head,e),Y(X,n,ge),Y(X,a,ge),o(a,s),o(a,r),o(a,c),bt(h,c,null),o(c,d),bt(_,c,null),o(c,f),bt(k,c,null),o(c,u),o(c,m),o(m,B),o(B,C),o(C,x),o(C,A),o(C,P),o(C,y),o(B,F),bt(b,B,null),o(B,H),o(B,w),o(w,L),o(w,q),o(w,O),o(w,W),o(w,K),o(B,D),o(B,V),o(V,G),o(V,de),o(V,oe),o(m,me),o(m,he),o(he,ke),o(ke,ae),o(ke,Xe),o(ke,ce),o(he,Pe),Re[Se].m(he,null),o(a,Ue),o(a,Me),o(Me,Qe),o(Qe,De),o(Qe,tt),o(Qe,He),be=!0,$e||(st=[Z(L,"click",t[11]),Z(O,"click",t[12]),Z(K,"click",t[15]),Z(G,"click",t[13]),Z(oe,"click",t[14]),Z(ae,"click",t[17]),Z(ce,"click",t[18])],$e=!0)},p(X,[ge]){const ue={};ge&1&&(ue.crew=X[0]),ge&2&&(ue.selectedIndex=X[1]),k.$set(ue),(!be||ge&8)&&U!==(U=(X[3].FirstName||"Unnamed")+"")&&Ze(A,U),(!be||ge&8)&&j!==(j=(X[3].LastName||"")+"")&&Ze(y,j);const xe={};ge&4&&(xe.character=X[2]),b.$set(xe),(!be||ge&32)&&lt(ae,"active",X[5]==="appearance"),(!be||ge&32)&&lt(ce,"active",X[5]==="info");let fe=Se;Se=et(X),Se===fe?Re[Se].p(X,ge):(Ma(),ut(Re[fe],1,1,()=>{Re[fe]=null}),Na(),we=Re[Se],we?we.p(X,ge):(we=Re[Se]=qe[Se](X),we.c()),_t(we,1),we.m(he,null)),(!be||ge&1)&&je!==(je=X[0].length+"")&&Ze(tt,je)},i(X){be||(_t(h.$$.fragment,X),_t(_.$$.fragment,X),_t(k.$$.fragment,X),_t(b.$$.fragment,X),_t(we),be=!0)},o(X){ut(h.$$.fragment,X),ut(_.$$.fragment,X),ut(k.$$.fragment,X),ut(b.$$.fragment,X),ut(we),be=!1},d(X){X&&(v(n),v(a)),v(e),kt(h),kt(_),kt(k),t[16](null),kt(b),Re[Se].d(),$e=!1,pt(st)}}}function ka(){let t;try{t=crypto.randomUUID()}catch{t=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}return{Id:t,CreatorName:"",FirstName:"",LastName:"",Nickname:"",BirthDate:"1920-01-01",Gender:"Male",Class:"AirCrew",Job:"None",Role:"Pilot",Biography:{en:""},SkillRanks:{Flying:0,Shooting:0,Bombing:0,Endurance:0,Engineering:0,Navigating:0}}}function bn(t,e,n){let a=[],s=0,l=Dt(),r=ka(),c,h="appearance";a=[_()],l=a[0].character,r=a[0].metadata,ba(()=>{const w="2.0";if(localStorage.getItem("crewDataVersion")!==w){console.log("Data version mismatch, clearing localStorage"),localStorage.removeItem("crew"),localStorage.setItem("crewDataVersion",w);return}try{const T=localStorage.getItem("crew");if(T){const q=JSON.parse(T);q&&Array.isArray(q)&&q.length>0&&(n(0,a=q),n(2,l=a[s].character),n(3,r=a[s].metadata))}}catch(T){console.error("Failed to load crew from localStorage:",T)}});function d(){if(typeof window<"u"&&a.length>0)try{localStorage.setItem("crew",JSON.stringify(a))}catch(w){console.error("Failed to save crew to localStorage:",w)}}function _(){return{character:Dt(),metadata:ka()}}function f(){const w=_();n(0,a=[...a,w]),n(1,s=a.length-1),n(2,l=w.character),n(3,r=w.metadata)}function k(w){if(a.length<=1){alert("You must have at least one crew member!");return}n(0,a=a.filter((L,T)=>T!==w)),s>=a.length&&n(1,s=a.length-1),n(2,l=a[s].character),n(3,r=a[s].metadata)}function u(w){n(1,s=w),n(2,l=a[w].character),n(3,r=a[w].metadata)}function m(w,L){L?(n(0,a=w),n(1,s=0)):n(0,a=[...a,...w]),a.length>0&&(n(2,l=a[s].character),n(3,r=a[s].metadata))}function B(w){n(2,l=w),n(0,a[s].character=w,a)}function C(){if(c){const w=c.exportPortrait(),L=document.createElement("a"),T=r.FirstName&&r.LastName?`${r.FirstName}_${r.LastName}.png`:"character-portrait.png";L.download=T,L.href=w,L.click()}}function x(){var J,D,V,G;const w={BodyShapeIndex:l.bodyShapeIndex||1,AccessoryColorIndex:((J=l.colorIndices)==null?void 0:J.Accessory)??1,SkinColorIndex:((D=l.colorIndices)==null?void 0:D.Skin)??2,HairColorIndex:((V=l.colorIndices)==null?void 0:V.Hair)??3,EyeColorIndex:((G=l.colorIndices)==null?void 0:G.Eye)??2},L={AccessoryFront:"Accessory",Blemish:"Blemish",Nose:"Nose",Eyebrows:"Eyebrows",Eyes:"Eyes",Moustache:"Moustache",Beard:"Beard",Mouth:"Mouth",Hair:"Hair",DetailUpper:"Detail",Headshape:"Headshape",Ears:"Ears"};for(const[_e,de]of Object.entries(L)){const oe=l.parts[_e]||{index:-1,variant:-1};w[de]={Index:oe.index,Variant:oe.variant}}const T={...r,EditorData:w},q=JSON.stringify(T,null,2),O=new Blob([q],{type:"application/json"}),M=URL.createObjectURL(O),W=document.createElement("a"),K=r.FirstName&&r.LastName?`${r.FirstName}_${r.LastName}.json`:"character-data.json";W.download=K,W.href=M,W.click(),URL.revokeObjectURL(M)}function U(){const w=a.map(M=>{var J,D,V,G;const W={BodyShapeIndex:M.character.bodyShapeIndex||1,AccessoryColorIndex:((J=M.character.colorIndices)==null?void 0:J.Accessory)??1,SkinColorIndex:((D=M.character.colorIndices)==null?void 0:D.Skin)??2,HairColorIndex:((V=M.character.colorIndices)==null?void 0:V.Hair)??3,EyeColorIndex:((G=M.character.colorIndices)==null?void 0:G.Eye)??2},K={AccessoryFront:"Accessory",Blemish:"Blemish",Nose:"Nose",Eyebrows:"Eyebrows",Eyes:"Eyes",Moustache:"Moustache",Beard:"Beard",Mouth:"Mouth",Hair:"Hair",DetailUpper:"Detail",Headshape:"Headshape",Ears:"Ears"};for(const[_e,de]of Object.entries(K)){const oe=M.character.parts[_e]||{index:-1,variant:-1};W[de]={Index:oe.index,Variant:oe.variant}}return{...M.metadata,EditorData:W}}),L=JSON.stringify(w,null,2),T=new Blob([L],{type:"application/json"}),q=URL.createObjectURL(T),O=document.createElement("a");O.download="crew-data.json",O.href=q,O.click(),URL.revokeObjectURL(q)}function A(){const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=L=>{const T=L.target.files[0];if(T){const q=new FileReader;q.onload=O=>{try{const M=JSON.parse(O.target.result),K=(Array.isArray(M)?M:[M]).map(J=>{const D=J.EditorData||{},V={bodyShapeIndex:D.BodyShapeIndex??1,colorIndices:{Skin:D.SkinColorIndex??2,Hair:D.HairColorIndex??3,Eye:D.EyeColorIndex??2,Accessory:D.AccessoryColorIndex??1},parts:{AccessoryFront:D.Accessory||{index:-1,variant:-1},Blemish:D.Blemish||{index:-1,variant:-1},Nose:D.Nose||{index:0,variant:0},Eyebrows:D.Eyebrows||{index:0,variant:0},Eyes:D.Eyes||{index:0,variant:0},Moustache:D.Moustache||{index:-1,variant:-1},Beard:D.Beard||{index:-1,variant:-1},Mouth:D.Mouth||{index:0,variant:0},Hair:D.Hair||{index:0,variant:0},HairBack:{index:4,variant:0},DetailUpper:D.Detail||{index:-1,variant:-1},DetailLower:{index:-1,variant:-1},Headshape:D.Headshape||{index:0,variant:0},HeadAuxiliary:{index:-1,variant:-1},Ears:D.Ears||{index:0,variant:0},Body:{index:0,variant:0},Clothes:{index:0,variant:0},ClothesBack:{index:0,variant:0}}};let G=J.Id;if(!G)try{G=crypto.randomUUID()}catch{G=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const _e={Id:G,CreatorName:J.CreatorName||"",FirstName:J.FirstName||"",LastName:J.LastName||"",Nickname:J.Nickname||"",BirthDate:J.BirthDate||"1920-01-01",Gender:J.Gender||"Male",Class:J.Class||"AirCrew",Job:J.Job||"None",Role:J.Role||"Pilot",Biography:J.Biography||{en:""},SkillRanks:J.SkillRanks||{Flying:0,Shooting:0,Bombing:0,Endurance:0,Engineering:0,Navigating:0}};return{character:V,metadata:_e}});n(0,a=K),n(1,s=0),alert(`Successfully imported ${K.length} crew member(s)!`)}catch(M){alert("Failed to import crew data. Invalid JSON format."),console.error(M)}},q.readAsText(T)}},w.click()}function P(){if(c&&navigator.share){const w=c.exportPortrait();fetch(w).then(L=>L.blob()).then(L=>{const T=new File([L],"character-portrait.png",{type:"image/png"});navigator.share({title:"My Character Portrait",text:`Check out ${r.FirstName||"my"} ${r.LastName||"character"}!`,files:[T]})})}else if(navigator.clipboard&&c){const w=c.exportPortrait();fetch(w).then(L=>L.blob()).then(L=>{navigator.clipboard.write([new ClipboardItem({"image/png":L})]),alert("Portrait copied to clipboard!")})}}function j(w){It[w?"unshift":"push"](()=>{c=w,n(4,c)})}const y=()=>n(5,h="appearance"),F=()=>n(5,h="info");function b(w){l=w,n(2,l)}function H(w){r=w,n(3,r)}return t.$$.update=()=>{t.$$.dirty&15&&a[s]&&(n(0,a[s].character=l,a),n(0,a[s].metadata=r,a),d())},[a,s,l,r,c,h,f,k,u,m,B,C,x,U,A,P,j,y,F,b,H]}class Bn extends vt{constructor(e){super(),mt(this,e,bn,kn,gt,{})}}export{Bn as component};
